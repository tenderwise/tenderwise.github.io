"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[119],{29119:(e,t,r)=>{r.r(t),r.d(t,{createLoader:()=>u,createMultiParser:()=>o,createParser:()=>a,createSerializer:()=>P,createStandardSchemaV1:()=>j,debounce:()=>n.o,defaultRateLimit:()=>n.s,parseAsArrayOf:()=>A,parseAsBoolean:()=>m,parseAsFloat:()=>f,parseAsHex:()=>p,parseAsIndex:()=>d,parseAsInteger:()=>h,parseAsIsoDate:()=>q,parseAsIsoDateTime:()=>y,parseAsJson:()=>w,parseAsNativeArrayOf:()=>U,parseAsNumberLiteral:()=>O,parseAsString:()=>c,parseAsStringEnum:()=>S,parseAsStringLiteral:()=>b,parseAsTimestamp:()=>v,throttle:()=>n.c,useQueryState:()=>C,useQueryStates:()=>L});var n=r(45828),l=r(34955),s=r(12115);function u(e){let{urlKeys:t={}}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function r(l){let{strict:s=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(l instanceof Promise)return l.then(e=>r(e,{strict:s}));let u=function(e){try{if(e instanceof Request)return e.url?new URL(e.url).searchParams:new URLSearchParams;if(e instanceof URL)return e.searchParams;if(e instanceof URLSearchParams)return e;if("object"==typeof e){let t=new URLSearchParams;for(let[r,n]of Object.entries(e))if(Array.isArray(n))for(let e of n)t.append(r,e);else void 0!==n&&t.set(r,n);return t}if("string"==typeof e){if(URL.hasOwnProperty("canParse")&&URL.canParse(e))return new URL(e).searchParams;return new URLSearchParams(e)}}catch(e){}return new URLSearchParams}(l),i={};for(let[r,l]of Object.entries(e)){var a,o,c;let e,h=null!=(a=t[r])?a:r,d="multi"===l.type?u.getAll(h):u.get(h);if((0,n.i)(d)){i[r]=null!=(o=l.defaultValue)?o:null;continue}try{e=l.parse(d)}catch(t){if(s)throw Error("[nuqs] Error while parsing query `".concat(d,"` for key `").concat(r,"`: ").concat(t));e=null}if(s&&d&&null===e)throw Error("[nuqs] Failed to parse query `".concat(d,"` for key `").concat(r,"` (got null)"));i[r]=null!=(c=null!=e?e:l.defaultValue)?c:null}return i}}function i(e,t,r){try{return e(t)}catch(e){return(0,l.l)("[nuqs] Error while parsing value `%s`: %O"+(r?" (for key `%s`)":""),t,e,r),null}}function a(e){function t(t){if(void 0===t)return null;let r="";if(Array.isArray(t)){if(void 0===t[0])return null;r=t[0]}return"string"==typeof t&&(r=t),i(e.parse,r)}return{type:"single",eq:(e,t)=>e===t,...e,parseServerSide:t,withDefault(e){return{...this,defaultValue:e,parseServerSide(r){var n;return null!=(n=t(r))?n:e}}},withOptions(e){return{...this,...e}}}}function o(e){function t(t){return void 0===t?null:i(e.parse,Array.isArray(t)?t:[t])}return{type:"multi",eq:(e,t)=>e===t,...e,parseServerSide:t,withDefault(e){return{...this,defaultValue:e,parseServerSide(r){var n;return null!=(n=t(r))?n:e}}},withOptions(e){return{...this,...e}}}}let c=a({parse:e=>e,serialize:String}),h=a({parse:e=>{let t=parseInt(e);return t==t?t:null},serialize:e=>""+Math.round(e)}),d=a({parse:e=>{let t=parseInt(e);return t==t?t-1:null},serialize:e=>""+Math.round(e+1)}),p=a({parse:e=>{let t=parseInt(e,16);return t==t?t:null},serialize:e=>{let t=Math.round(e).toString(16);return(1&t.length?"0":"")+t}}),f=a({parse:e=>{let t=parseFloat(e);return t==t?t:null},serialize:String}),m=a({parse:e=>"true"===e.toLowerCase(),serialize:String});function g(e,t){return e.valueOf()===t.valueOf()}let v=a({parse:e=>{let t=parseInt(e);return t==t?new Date(t):null},serialize:e=>""+e.valueOf(),eq:g}),y=a({parse:e=>{let t=new Date(e);return t.valueOf()==t.valueOf()?t:null},serialize:e=>e.toISOString(),eq:g}),q=a({parse:e=>{let t=new Date(e.slice(0,10));return t.valueOf()==t.valueOf()?t:null},serialize:e=>e.toISOString().slice(0,10),eq:g});function S(e){return b(e)}function b(e){return a({parse:t=>e.includes(t)?t:null,serialize:String})}function O(e){return a({parse:t=>{let r=parseFloat(t);return e.includes(r)?r:null},serialize:String})}function w(e){return a({parse:t=>{try{let r=JSON.parse(t);if("~standard"in e){let t=e["~standard"].validate(r);if(t instanceof Promise)throw Error("[nuqs] Only synchronous Standard Schemas are supported in parseAsJson.");return t.issues?null:t.value}return e(r)}catch(e){return null}},serialize:e=>JSON.stringify(e),eq:(e,t)=>e===t||JSON.stringify(e)===JSON.stringify(t)})}function A(e){var t;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",",n=null!=(t=e.eq)?t:(e,t)=>e===t,l=encodeURIComponent(r);return a({parse:t=>""===t?[]:t.split(r).map((t,n)=>i(e.parse,t.replaceAll(l,r),"[".concat(n,"]"))).filter(e=>null!=e),serialize:t=>t.map(t=>(e.serialize?e.serialize(t):String(t)).replaceAll(r,l)).join(r),eq:(e,t)=>e===t||e.length===t.length&&e.every((e,r)=>n(e,t[r]))})}function U(e){var t;let r=null!=(t=e.eq)?t:(e,t)=>e===t;return o({parse:t=>{let r=t.map((t,r)=>i(e.parse,t,"[".concat(r,"]"))).filter(e=>null!=e);return 0===r.length?null:r},serialize:t=>(Array.isArray(t)?t:[t]).flatMap(t=>{var r,n;let l=null!=(n=null==(r=e.serialize)?void 0:r.call(e,t))?n:String(t);return"string"==typeof l?[l]:[...l]}),eq:(e,t)=>e===t||e.length===t.length&&e.every((e,n)=>r(e,t[n]))}).withDefault([])}function P(e){let{clearOnDefault:t=!0,urlKeys:r={},processUrlSearchParams:s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(u){var i,a,o,c,h;let d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},[p,f]=M(u)?function(e){if("string"==typeof e){let[t="",...r]=e.split("?");return[t,new URLSearchParams(r.join("?"))]}return e instanceof URLSearchParams?["",new URLSearchParams(e)]:[e.origin+e.pathname,new URLSearchParams(e.searchParams)]}(u):["",new URLSearchParams],m=M(u)?d:u;if(null===m){for(let t in e){let e=null!=(i=r[t])?i:t;f.delete(e)}return s&&(f=s(f)),p+(0,l.o)(f)}for(let l in e){let s=e[l],u=m[l];if(!s||void 0===u)continue;let i=null!=(a=r[l])?a:l,d=void 0!==s.defaultValue&&null!==u&&(null!=(o=s.eq)?o:(e,t)=>e===t)(u,s.defaultValue);null===u||(null==(h=null!=(c=s.clearOnDefault)?c:t)||h)&&d?f.delete(i):f=(0,n.a)(s.serialize(u),i,f)}return s&&(f=s(f)),p+(0,l.o)(f)}}function M(e){return"string"==typeof e||e instanceof URLSearchParams||e instanceof URL}function j(e){let{urlKeys:t,partialOutput:r=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=P(e,{urlKeys:t}),l=u(e,{urlKeys:t});return{"~standard":{version:1,vendor:"nuqs",validate(e){try{let t=l(n(e),{strict:!0});if(r)for(let r in t)r in e||delete t[r];return{value:t}}catch(e){return{issues:[{message:e instanceof Error?e.message:String(e)}]}}}}}}let R=(0,n.r)(),k={};function L(e){var t,r,u;let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=(0,s.useId)(),o=(0,l.i)(),c=(0,l.a)(),{history:h="replace",scroll:d=null!=(t=null==o?void 0:o.scroll)&&t,shallow:p=null==(r=null==o?void 0:o.shallow)||r,throttleMs:f=n.s.timeMs,limitUrlUpdates:m=null==o?void 0:o.limitUrlUpdates,clearOnDefault:g=null==(u=null==o?void 0:o.clearOnDefault)||u,startTransition:v,urlKeys:y=k}=i,q=Object.keys(e).join(","),S=(0,s.useMemo)(()=>Object.fromEntries(Object.keys(e).map(e=>{var t;return[e,null!=(t=y[e])?t:e]})),[q,JSON.stringify(y)]),b=(0,l.r)(Object.values(S)),O=b.searchParams,w=(0,s.useRef)({}),A=(0,s.useMemo)(()=>Object.fromEntries(Object.keys(e).map(t=>{var r;return[t,null!=(r=e[t].defaultValue)?r:null]})),[Object.values(e).map(e=>{let{defaultValue:t}=e;return t}).join(",")]),U=n.t.useQueuedQueries(Object.values(S)),[P,M]=(0,s.useState)(()=>Q(e,y,null!=O?O:new URLSearchParams,U).state),j=(0,s.useRef)(P);if((0,l.c)("[nuq+ %s `%s`] render - state: %O, iSP: %s",a,q,P,O),Object.keys(w.current).join("&")!==Object.values(S).join("&")){let{state:t,hasChanged:r}=Q(e,y,O,U,w.current,j.current);r&&((0,l.c)("[nuq+ %s `%s`] State changed: %O",a,q,{state:t,initialSearchParams:O,queuedQueries:U,queryRef:w.current,stateRef:j.current}),j.current=t,M(t)),w.current=Object.fromEntries(Object.entries(S).map(t=>{var r,n;let[l,s]=t;return[s,(null==(r=e[l])?void 0:r.type)==="multi"?null==O?void 0:O.getAll(s):null!=(n=null==O?void 0:O.get(s))?n:null]}))}(0,s.useEffect)(()=>{let{state:t,hasChanged:r}=Q(e,y,O,U,w.current,j.current);r&&((0,l.c)("[nuq+ %s `%s`] State changed: %O",a,q,{state:t,initialSearchParams:O,queuedQueries:U,queryRef:w.current,stateRef:j.current}),j.current=t,M(t))},[Object.values(S).map(e=>"".concat(e,"=").concat(null==O?void 0:O.getAll(e))).join("&"),JSON.stringify(U)]),(0,s.useEffect)(()=>{let t=Object.keys(e).reduce((t,r)=>(t[r]=t=>{let{state:n,query:s}=t;M(t=>{var u,i,o;let{defaultValue:c}=e[r],h=S[r],d=null!=(u=null!=n?n:c)?u:null;return Object.is(null!=(o=null!=(i=t[r])?i:c)?o:null,d)?((0,l.c)("[nuq+ %s `%s`] Cross-hook key sync %s: %O (default: %O). no change, skipping, resolved: %O",a,q,h,n,c,j.current),t):(j.current={...j.current,[r]:d},w.current[h]=s,(0,l.c)("[nuq+ %s `%s`] Cross-hook key sync %s: %O (default: %O). updateInternalState, resolved: %O",a,q,h,n,c,j.current),j.current)})},t),{});for(let r of Object.keys(e)){let e=S[r];(0,l.c)("[nuq+ %s `%s`] Subscribing to sync for `%s`",a,e,q),R.on(e,t[r])}return()=>{for(let r of Object.keys(e)){let e=S[r];(0,l.c)("[nuq+ %s `%s`] Unsubscribing to sync for `%s`",a,e,q),R.off(e,t[r])}}},[q,S]);let L=(0,s.useCallback)(function(t){var r,s,u,i,o,y,O,w,U,P,M,k,L,Q,C,N,x,z,I,V,F,D,T,J,_,$,B;let H,G=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},K=Object.fromEntries(Object.keys(e).map(e=>[e,null])),W="function"==typeof t?null!=(r=t(E(j.current,A)))?r:K:null!=t?t:K;(0,l.c)("[nuq+ %s `%s`] setState: %O",a,q,W);let X=0,Y=!1,Z=[];for(let[t,r]of Object.entries(W)){let a=e[t],q=S[t];if(!a)continue;(null!=(o=null!=(i=G.clearOnDefault)?i:a.clearOnDefault)?o:g)&&null!==r&&void 0!==a.defaultValue&&(null!=(y=a.eq)?y:(e,t)=>e===t)(r,a.defaultValue)&&(r=null);let A=null===r?null:(null!=(O=a.serialize)?O:String)(r);R.emit(q,{state:r,query:A});let j={key:q,query:A,options:{history:null!=(U=null!=(w=G.history)?w:a.history)?U:h,shallow:null!=(M=null!=(P=G.shallow)?P:a.shallow)?M:p,scroll:null!=(L=null!=(k=G.scroll)?k:a.scroll)?L:d,startTransition:null!=(C=null!=(Q=G.startTransition)?Q:a.startTransition)?C:v}};if((null==G||null==(s=G.limitUrlUpdates)?void 0:s.method)==="debounce"||(null==m?void 0:m.method)==="debounce"||(null==(u=a.limitUrlUpdates)?void 0:u.method)==="debounce"){!0===j.options.shallow&&console.warn((0,l.s)(422));let e=null!=(V=null!=(I=null!=(z=null==G||null==(N=G.limitUrlUpdates)?void 0:N.timeMs)?z:null==m?void 0:m.timeMs)?I:null==(x=a.limitUrlUpdates)?void 0:x.timeMs)?V:n.s.timeMs,t=n.t.push(j,e,b,c);X<e&&(H=t,X=e)}else{let e=null!=(B=null!=($=null!=(_=null!=(J=null!=(T=null==G||null==(F=G.limitUrlUpdates)?void 0:F.timeMs)?T:null==a||null==(D=a.limitUrlUpdates)?void 0:D.timeMs)?J:null==m?void 0:m.timeMs)?_:G.throttleMs)?$:a.throttleMs)?B:f;Z.push(n.t.abort(q)),n.n.push(j,e),Y=!0}}let ee=Z.reduce((e,t)=>t(e),Y?n.n.flush(b,c):n.n.getPendingPromise(b));return null!=H?H:ee},[q,h,p,d,f,null==m?void 0:m.method,null==m?void 0:m.timeMs,v,S,b.updateUrl,b.getSearchParamsSnapshot,b.rateLimitFactor,c,A]);return[(0,s.useMemo)(()=>E(P,A),[P,A]),L]}function Q(e,t,r,l,s,u){let a=!1,o=Object.entries(e).reduce((e,o)=>{var c,h,d,p,f,m;let[g,v]=o,y=null!=(c=null==t?void 0:t[g])?c:g,q=l[y],S="multi"===v.type?[]:null,b=void 0===q?null!=(h="multi"===v.type?null==r?void 0:r.getAll(y):null==r?void 0:r.get(y))?h:S:q;return s&&u&&((m=null!=(d=s[y])?d:S)===b||null!==m&&null!==b&&"string"!=typeof m&&"string"!=typeof b&&m.length===b.length&&m.every((e,t)=>e===b[t]))?e[g]=null!=(p=u[g])?p:null:(a=!0,e[g]=null!=(f=(0,n.i)(b)?null:i(v.parse,b,y))?f:null,s&&(s[y]=b)),e},{});if(!a){let t=Object.keys(e),r=Object.keys(null!=u?u:{});a=t.length!==r.length||t.some(e=>!r.includes(e))}return{state:o,hasChanged:a}}function E(e,t){return Object.fromEntries(Object.keys(e).map(r=>{var n,l;return[r,null!=(l=null!=(n=e[r])?n:t[r])?l:null]}))}function C(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{parse:r,type:n,serialize:l,eq:u,defaultValue:i,...a}=t,[{[e]:o},c]=L({[e]:{parse:null!=r?r:e=>e,type:n,serialize:l,eq:u,defaultValue:i}},a);return[o,(0,s.useCallback)(function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return c(r=>({[e]:"function"==typeof t?t(r[e]):t}),r)},[e,c])]}},34955:(e,t,r)=>{r.d(t,{a:()=>f,c:()=>s,i:()=>p,l:()=>u,n:()=>h,o:()=>o,r:()=>d,s:()=>a});var n=r(12115);let l=function(){try{let e="nuqs-localStorage-test";if("undefined"==typeof localStorage)return!1;localStorage.setItem(e,e);let t=localStorage.getItem(e)===e;return localStorage.removeItem(e),t&&(localStorage.getItem("debug")||"").includes("nuqs")}catch{return!1}}();function s(e,...t){if(!l)return;let r=function(e,...t){return e.replace(/%[sfdO]/g,e=>{let r=t.shift();return"%O"===e&&r?JSON.stringify(r).replace(/"([^"]+)":/g,"$1:"):String(r)})}(e,...t);performance.mark(r);try{console.log(e,...t)}catch{console.log(r)}}function u(e,...t){l&&console.warn(e,...t)}let i={303:"Multiple adapter contexts detected. This might happen in monorepos.",404:"nuqs requires an adapter to work with your framework.",409:"Multiple versions of the library are loaded. This may lead to unexpected behavior. Currently using `%s`, but `%s` (via the %s adapter) was about to load on top.",414:"Max safe URL length exceeded. Some browsers may not be able to accept this URL. Consider limiting the amount of state stored in the URL.",422:"Invalid options combination: `limitUrlUpdates: debounce` should be used in SSR scenarios, with `shallow: false`",429:"URL update rate-limited by the browser. Consider increasing `throttleMs` for key(s) `%s`. %O",500:"Empty search params cache. Search params can't be accessed in Layouts.",501:"Search params cache already populated. Have you called `parse` twice?"};function a(e){return`[nuqs] ${i[e]}
  See https://nuqs.dev/NUQS-${e}`}function o(e){if(0===e.size)return"";let t=[];for(let[r,n]of e.entries()){let e=r.replace(/#/g,"%23").replace(/&/g,"%26").replace(/\+/g,"%2B").replace(/=/g,"%3D").replace(/\?/g,"%3F");t.push(`${e}=${n.replace(/%/g,"%25").replace(/\+/g,"%2B").replace(/ /g,"+").replace(/#/g,"%23").replace(/&/g,"%26").replace(/"/g,"%22").replace(/'/g,"%27").replace(/`/g,"%60").replace(/</g,"%3C").replace(/>/g,"%3E").replace(/[\x00-\x1F]/g,e=>encodeURIComponent(e))}`)}return"?"+t.join("&")}let c=(0,n.createContext)({useAdapter(){throw Error(a(404))}});function h(e){return({children:t,defaultOptions:r,processUrlSearchParams:l,...s})=>(0,n.createElement)(c.Provider,{...s,value:{useAdapter:e,defaultOptions:r,processUrlSearchParams:l}},t)}function d(e){let t=(0,n.useContext)(c);if(!("useAdapter"in t))throw Error(a(404));return t.useAdapter(e)}c.displayName="NuqsAdapterContext",l&&"undefined"!=typeof window&&(window.__NuqsAdapterContext&&window.__NuqsAdapterContext!==c&&console.error(a(303)),window.__NuqsAdapterContext=c);let p=()=>(0,n.useContext)(c).defaultOptions,f=()=>(0,n.useContext)(c).processUrlSearchParams},45828:(e,t,r)=>{r.d(t,{a:()=>o,c:()=>s,i:()=>a,n:()=>m,o:()=>u,r:()=>c,s:()=>i,t:()=>v});var n=r(34955),l=r(12115);function s(e){return{method:"throttle",timeMs:e}}function u(e){return{method:"debounce",timeMs:e}}let i=s(function(){if("undefined"==typeof window||!window.GestureEvent)return 50;try{let e=navigator.userAgent?.match(/version\/([\d\.]+) safari/i);return parseFloat(e[1])>=17?120:320}catch{return 320}}());function a(e){return null===e||Array.isArray(e)&&0===e.length}function o(e,t,r){if("string"==typeof e)r.set(t,e);else{for(let n of(r.delete(t),e))r.append(t,n);r.has(t)||r.set(t,"")}return r}function c(){let e=new Map;return{on(t,r){let n=e.get(t)||[];return n.push(r),e.set(t,n),()=>this.off(t,r)},off(t,r){let n=e.get(t);n&&e.set(t,n.filter(e=>e!==r))},emit(t,r){e.get(t)?.forEach(e=>e(r))}}}function h(e,t,r){let n=setTimeout(function(){e(),r.removeEventListener("abort",l)},t);function l(){clearTimeout(n),r.removeEventListener("abort",l)}r.addEventListener("abort",l)}function d(){let e=Promise;if(Promise.hasOwnProperty("withResolvers"))return Promise.withResolvers();let t=()=>{},r=()=>{};return{promise:new e((e,n)=>{t=e,r=n}),resolve:t,reject:r}}function p(){return new URLSearchParams(location.search)}var f=class{updateMap=new Map;options={history:"replace",scroll:!1,shallow:!0};timeMs=i.timeMs;transitions=new Set;resolvers=null;controller=null;lastFlushedAt=0;resetQueueOnNextPush=!1;push({key:e,query:t,options:r},l=i.timeMs){this.resetQueueOnNextPush&&(this.reset(),this.resetQueueOnNextPush=!1),(0,n.c)("[nuqs gtq] Enqueueing %s=%s %O",e,t,r),this.updateMap.set(e,t),"push"===r.history&&(this.options.history="push"),r.scroll&&(this.options.scroll=!0),!1===r.shallow&&(this.options.shallow=!1),r.startTransition&&this.transitions.add(r.startTransition),(!Number.isFinite(this.timeMs)||l>this.timeMs)&&(this.timeMs=l)}getQueuedQuery(e){return this.updateMap.get(e)}getPendingPromise({getSearchParamsSnapshot:e=p}){return this.resolvers?.promise??Promise.resolve(e())}flush({getSearchParamsSnapshot:e=p,rateLimitFactor:t=1,...r},l){if(this.controller??=new AbortController,!Number.isFinite(this.timeMs))return(0,n.c)("[nuqs gtq] Skipping flush due to throttleMs=Infinity"),Promise.resolve(e());if(this.resolvers)return this.resolvers.promise;this.resolvers=d();let s=()=>{this.lastFlushedAt=performance.now();let[t,n]=this.applyPendingUpdates({...r,autoResetQueueOnUpdate:r.autoResetQueueOnUpdate??!0,getSearchParamsSnapshot:e},l);null===n?(this.resolvers.resolve(t),this.resetQueueOnNextPush=!0):this.resolvers.reject(t),this.resolvers=null};return h(()=>{let e=performance.now()-this.lastFlushedAt,r=this.timeMs,l=t*Math.max(0,r-e);(0,n.c)("[nuqs gtq] Scheduling flush in %f ms. Throttled at %f ms (x%f)",l,r,t),0===l?s():h(s,l,this.controller.signal)},0,this.controller.signal),this.resolvers.promise}abort(){return this.controller?.abort(),this.controller=new AbortController,this.resolvers?.resolve(new URLSearchParams),this.resolvers=null,this.reset()}reset(){let e=Array.from(this.updateMap.keys());return(0,n.c)("[nuqs gtq] Resetting queue %s",JSON.stringify(Object.fromEntries(this.updateMap))),this.updateMap.clear(),this.transitions.clear(),this.options={history:"replace",scroll:!1,shallow:!0},this.timeMs=i.timeMs,e}applyPendingUpdates(e,t){let{updateUrl:r,getSearchParamsSnapshot:l}=e,s=l();if((0,n.c)("[nuqs gtq] Applying %d pending update(s) on top of %s",this.updateMap.size,s.toString()),0===this.updateMap.size)return[s,null];let u=Array.from(this.updateMap.entries()),i={...this.options},a=Array.from(this.transitions);for(let[t,r]of(e.autoResetQueueOnUpdate&&this.reset(),(0,n.c)("[nuqs gtq] Flushing queue %O with options %O",u,i),u))null===r?s.delete(t):s=o(r,t,s);t&&(s=t(s));try{return!function(e,t){let r=t;for(let t=e.length-1;t>=0;t--){let n=e[t];if(!n)continue;let l=r;r=()=>n(l)}r()}(a,()=>{r(s,i)}),[s,null]}catch(e){return console.error((0,n.s)(429),u.map(([e])=>e).join(),e),[s,e]}}};let m=new f;var g=class{callback;resolvers=d();controller=new AbortController;queuedValue=void 0;constructor(e){this.callback=e}abort(){this.controller.abort(),this.queuedValue=void 0}push(e,t){return this.queuedValue=e,this.controller.abort(),this.controller=new AbortController,h(()=>{let t=this.resolvers;try{(0,n.c)("[nuqs dq] Flushing debounce queue",e);let r=this.callback(e);(0,n.c)("[nuqs dq] Reset debounce queue %O",this.queuedValue),this.queuedValue=void 0,this.resolvers=d(),r.then(e=>t.resolve(e)).catch(e=>t.reject(e))}catch(e){this.queuedValue=void 0,t.reject(e)}},t,this.controller.signal),this.resolvers.promise}};let v=new class{throttleQueue;queues=new Map;queuedQuerySync=c();constructor(e=new f){this.throttleQueue=e}useQueuedQueries(e){return function(e,t,r){let n=(0,l.useCallback)(()=>{let t=Object.fromEntries(e.map(e=>[e,r(e)]));return[JSON.stringify(t),t]},[e.join(","),r]),s=(0,l.useRef)(null);return null===s.current&&(s.current=n()),(0,l.useSyncExternalStore)((0,l.useCallback)(r=>{let n=e.map(e=>t(e,r));return()=>n.forEach(e=>e())},[e.join(","),t]),()=>{let[e,t]=n();return s.current[0]===e?s.current[1]:(s.current=[e,t],t)},()=>s.current[1])}(e,(e,t)=>this.queuedQuerySync.on(e,t),e=>this.getQueuedQuery(e))}push(e,t,r,l){if(!Number.isFinite(t))return Promise.resolve((r.getSearchParamsSnapshot??p)());let s=e.key;if(!this.queues.has(s)){(0,n.c)("[nuqs dqc] Creating debounce queue for `%s`",s);let e=new g(e=>(this.throttleQueue.push(e),this.throttleQueue.flush(r,l).finally(()=>{this.queues.get(e.key)?.queuedValue===void 0&&((0,n.c)("[nuqs dqc] Cleaning up empty queue for `%s`",e.key),this.queues.delete(e.key)),this.queuedQuerySync.emit(e.key)})));this.queues.set(s,e)}(0,n.c)("[nuqs dqc] Enqueueing debounce update %O",e);let u=this.queues.get(s).push(e,t);return this.queuedQuerySync.emit(s),u}abort(e){let t=this.queues.get(e);return t?((0,n.c)("[nuqs dqc] Aborting debounce queue %s=%s",e,t.queuedValue?.query),this.queues.delete(e),t.abort(),this.queuedQuerySync.emit(e),e=>(e.then(t.resolvers.resolve,t.resolvers.reject),e)):e=>e}abortAll(){for(let[e,t]of this.queues.entries())(0,n.c)("[nuqs dqc] Aborting debounce queue %s=%s",e,t.queuedValue?.query),t.abort(),t.resolvers.resolve(new URLSearchParams),this.queuedQuerySync.emit(e);this.queues.clear()}getQueuedQuery(e){let t=this.queues.get(e)?.queuedValue?.query;return void 0!==t?t:this.throttleQueue.getQueuedQuery(e)}}(m)}}]);