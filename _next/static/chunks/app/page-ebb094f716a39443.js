(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{4407:t=>{t.exports={Container:"PhoneField_Container__EtH3i",Input:"PhoneField_Input__dCT3d",Button:"PhoneField_Button__O8Eae"}},8979:(t,e,n)=>{"use strict";n.d(e,{Ht:()=>i,As:()=>u.useAuth});var a=n(94971),o=n(95920),r=n(86266),s=new WeakMap;class i{constructor(t){(0,o._)(this,s,{writable:!0,value:void 0}),this.checkUserExists=t=>{let{phoneNumberWithCountryCode:e}=t;return(0,a._)(this,s).anonPost("/auth/user_exist_check?user_id=".concat(e))},this.generateOtp=t=>{let{phoneNumberWithCountryCode:e}=t;return(0,a._)(this,s).anonPost("/auth/generate_otp?user_id=".concat(e))},this.verifyOtp=t=>{let{otp:e}=t;return(0,a._)(this,s).anonPost("/auth/verify_otp",{otp:e})},(0,r._)(this,s,t.apiService)}}n(53913);var u=n(29629)},21178:t=>{t.exports={Error:"FormError_Error__eRI_X"}},29629:(t,e,n)=>{"use strict";n.d(e,{g:()=>o,useAuth:()=>r});var a=n(12115);let o=(0,a.createContext)({}),r=()=>(0,a.useContext)(o)},37244:t=>{t.exports={Container:"Layout_Container__8QhIo",Header:"Layout_Header__f_3V0",Main:"Layout_Main__KyruP",FormContainer:"Layout_FormContainer__8ims9"}},43517:(t,e,n)=>{"use strict";n.d(e,{A:()=>a.default});var a=n(49836)},49836:(t,e,n)=>{"use strict";n.d(e,{default:()=>l});var a=n(95155),o=n(856),r=n(82855),s=n(90147),i=n.n(s);let u=(0,n(74466).F)(i().Button,{variants:{variant:{primary:i().ButtonPrimary,secondary:i().ButtonSecondary,ghost:i().ButtonGhost},disabled:{true:i().ButtonDisabled,false:void 0},size:{sm:i().ButtonSmall,md:i().ButtonMedium,lg:i().ButtonLarge},color:{sm:i().ButtonSmall,md:i().ButtonMedium,lg:i().ButtonLarge}},defaultVariants:{variant:"primary",size:"md"}}),l=function(t){let{children:e,className:n,variant:s,size:l,...h}=t,{...c}=h,d=h.disabled||!1;return(0,a.jsx)(o.$,{isDisabled:d,className:(0,r.t)(n,i().Button,u({variant:s,disabled:d,size:l})),...c,children:e})}},50418:t=>{t.exports={Layout:"AuthenticationPage_Layout__7Pyd_",Main:"AuthenticationPage_Main__gll00",FormContainer:"AuthenticationPage_FormContainer__NwHe6"}},53557:(t,e,n)=>{"use strict";n.d(e,{A:()=>m,s:()=>p});var a=n(95155),o=n(12115),r=n(49694),s=n(40139),i=n.n(s),u=n(48973),l=n.n(u);let h=o.createContext({});function c(t){let{initialValues:e={},yupValidationSchema:n,children:s,onSubmit:u,extraFields:c,onChange:d}=t,_=(0,o.useCallback)(t=>{u&&u(t)},[u]),m=(0,r.Wx)({initialValues:e,onSubmit:_,validationSchema:n,validateOnMount:!0}),{values:p,errors:v,touched:f,setFieldValue:g,handleSubmit:b,setFieldTouched:A}=m,x=(0,o.useCallback)(t=>!!l()(v,t,!1)&&!!l()(f,t,!1),[v,f]),y=!!Object.keys(v).length,k=(0,o.useMemo)(()=>({values:p,errors:v,touched:f,setFieldValue:g,submitForm:b,setFieldTouched:A,touchedAndHasError:x,hasError:y,...c}),[p,v,f,g,b,A,x,c,y]);return(0,o.useEffect)(()=>{d&&d(p,{hasError:y})},[d,p,y]),(0,a.jsx)(h.Provider,{value:k,children:(0,a.jsx)(r.QI,{value:m,children:i()(s)?s({context:k}):s})})}let d=function(t){return(0,a.jsx)(c,{...t})};n(21178);let _=(0,o.forwardRef)(function(t,e){let{steps:n,initialStepId:r,extraFields:s,className:i,onStepChange:u,children:l,...h}=t,c=(0,o.useRef)(null),_=(0,o.useMemo)(()=>{let t=[...n];return t.sort((t,e)=>t.order-e.order),t},[n]),m=(0,o.useMemo)(()=>_.reduce((t,e)=>({...t,[e.id]:e}),{}),[_]),[p,v]=(0,o.useState)(()=>_.findIndex(t=>t.id===r)||0),[f,g]=(0,o.useState)(r||null),b=(0,o.useCallback)(t=>{g(t),u&&u({activeStepId:t,activeStep:m[t]})},[u,m]),A=(0,o.useCallback)(()=>{if(0===p)return;let t=Math.max(0,p-1);v(t),b(_[t].id)},[p,b,_]),x=(0,o.useCallback)(()=>{if(p===_.length-1)return;let t=Math.min(_.length-1,p+1);v(t),b(_[t].id)},[p,b,_]),y=f?m[f]:null,k=(0,o.useMemo)(()=>({...s,activeStepIndex:p,activeStepId:f,activeStep:y,nextStep:x,previousStep:A,gotToStep:b,stepFormRef:c}),[s,p,f,y,x,A,b]);return(0,o.useImperativeHandle)(e,()=>(c.current={activeStepIndex:p,activeStepId:f,activeStep:y,nextStep:x,previousStep:A,gotToStep:b},c.current),[p,f,y,x,A,b]),(0,a.jsx)(d,{...h,extraFields:k,initialValues:h.initialValues,children:t=>{let{context:{submitForm:e}}=t;return(0,a.jsx)("form",{className:i,onSubmit:e,children:l?l({...t,children:(null==y?void 0:y.content)||null}):(0,a.jsx)(a.Fragment,{children:(null==y?void 0:y.content)||null})})}})});_.displayName="StepForm";let m=_,p=()=>o.useContext(h)},53913:(t,e,n)=>{"use strict";n.d(e,{default:()=>k});var a=n(95155),o=n(12115),r=n(29629),s=n(94971),i=n(95920),u=n(86266),l=n(23464),h=n(45009),c=n.n(h),d=n(48973),_=n.n(d);let m="PAYPIPE";var p=new WeakMap,v=new WeakMap,f=new WeakMap,g=new WeakMap;class b{constructor(t){var e=this;(0,i._)(this,p,{writable:!0,value:void 0}),(0,i._)(this,v,{writable:!0,value:void 0}),(0,i._)(this,f,{writable:!0,value:void 0}),(0,i._)(this,g,{writable:!0,value:void 0}),(0,u._)(this,p,"@".concat("test",":API")),(0,u._)(this,f,""),(0,u._)(this,g,!1),this.getAuthToken=()=>{if((0,s._)(this,g)&&"undefined"!=typeof localStorage)try{let t=JSON.parse(localStorage.getItem(m)||"{}"),e=_()(t,"token");(0,u._)(this,f,e)}catch(t){}return(0,s._)(this,f)?"Bearer ".concat((0,s._)(this,f)):""},this.setAuthToken=t=>{(0,u._)(this,f,t),(0,s._)(this,g)&&"undefined"!=typeof localStorage&&localStorage.setItem(m,JSON.stringify({token:t}))},this.clearAuthToken=()=>{(0,u._)(this,f,"")},this.createAxiosInstance=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{baseUrl:""},{baseUrl:n,requestInterceptor:a,responseInterceptor:o,responseErrorInterceptor:r,authToken:s}=t,i=l.A.create({baseURL:n});return s&&(0,u._)(e,f,s),a&&i.interceptors.request.use(async t=>(a&&await a(t),Promise.resolve(t))),(o||r)&&i.interceptors.response.use(async t=>(o&&await o(t),t),async t=>(r&&await r(t),Promise.reject(t))),i},this.get=function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e.getAuthToken())throw Error("[".concat((0,s._)(e,p),"]: Auth token is not set, use anonGet method for anonymous get calls"));return c()(n,'headers["Authorization"]',e.getAuthToken()),(0,s._)(e,v).get(t,n)},this.post=function(t,n){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e.getAuthToken())throw Error("[".concat((0,s._)(e,p),"]: Auth token is not set, use anonPost method for anonymous post calls"));return c()(a,'headers["Authorization"]',e.getAuthToken()),(0,s._)(e,v).post(t,n,a)},this.put=function(t,n){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e.getAuthToken())throw Error("[".concat((0,s._)(e,p),"]: Auth token is not set, use anonPut method for anonymous put calls"));return c()(a,'headers["Authorization"]',e.getAuthToken()),(0,s._)(e,v).put(t,n,a)},this.delete=function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e.getAuthToken())throw Error("[".concat((0,s._)(e,p),"]: Auth token is not set, use anonDelete method for anonymous delete calls"));return c()(n,'headers["Authorization"]',e.getAuthToken()),(0,s._)(e,v).delete(t,n)},this.patch=function(t,n){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e.getAuthToken())throw Error("[".concat((0,s._)(e,p),"]: Auth token is not set, use anonPatch for anonymous patch calls"));return c()(a,'headers["Authorization"]',e.getAuthToken()),(0,s._)(e,v).patch(t,n,a)},this.anonGet=(t,e)=>(0,s._)(this,v).get(t,e),this.anonPost=(t,e,n)=>(0,s._)(this,v).post(t,e,n),this.anonPut=(t,e,n)=>(0,s._)(this,v).put(t,e,n),this.anonDelete=(t,e)=>(0,s._)(this,v).delete(t,e),this.anonPatch=(t,e,n)=>(0,s._)(this,v).patch(t,e,n),(0,u._)(this,v,this.createAxiosInstance(t))}}var A=n(8979);let x=new b({baseUrl:"http://13.203.13.165:8000/api/v1"}),y=new A.Ht({apiService:x}),k=function(t){let{children:e}=t,[n,s]=(0,o.useState)(!1),[i,u]=(0,o.useState)(!1),[l,h]=(0,o.useState)(!1),c=(0,o.useCallback)(t=>{let{phoneNumberWithCountryCode:e}=t;return l?Promise.resolve():(h(!0),y.generateOtp({phoneNumberWithCountryCode:e}).finally(()=>{h(!1)}))},[l]),d=(0,o.useCallback)(t=>{let{otp:e}=t;return i?Promise.resolve():(u(!0),y.verifyOtp({otp:e}).then(()=>{s(!0)}).finally(()=>{u(!1)}))},[i]),_=(0,o.useMemo)(()=>({isAuthenticated:n,isAuthenticating:i,isGettingOtp:l,generateOtp:c,verifyOtp:d}),[n,i,l,c,d]);return(0,a.jsx)(r.g.Provider,{value:_,children:e})}},60040:(t,e,n)=>{"use strict";n.d(e,{default:()=>j});var a=n(95155),o=n(12115),r=n(35695),s=n(53557),i=n(8979),u=function(t){return t.Phone="phone",t.Otp="otp",t}({}),l=n(37129),h=n(82855),c=n(39365),d=n.n(c),_=n(4407),m=n.n(_);n(30133);let p=function(t){let{className:e,value:n,onChange:r}=t,s=(0,o.useCallback)(function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];r&&r(e[3])},[r]);return(0,a.jsx)(d(),{disableDropdown:!0,country:"in",containerClass:(0,h.t)(m().Container,e),inputClass:m().Input,buttonClass:m().Button,value:n,onChange:s,placeholder:"Enter Your Mobile Number"})};var v=n(43517),f=n(83660),g=n.n(f),b=n(23293),A=n(61781),x=n.n(A);let y=function(t){let{className:e,value:n,onChange:r}=t,[s,i]=(0,o.useState)(""),u=void 0!==n&&void 0!==r;return(0,a.jsx)(b.A,{containerStyle:(0,h.t)(e,x().Container),value:u?n:s,onChange:u?r:i,numInputs:6,renderInput:t=>(0,a.jsx)("input",{...t,type:"number",pattern:"[0-9]*",inputMode:"numeric",className:x().Input}),placeholder:"------"})};var k=n(67666);let P=s.s,B={phone:"",otp:""},S=l.Ik().shape({phone:l.Yj().required(),otp:l.Yj().min(6).max(6).required()}),C=[{id:u.Phone,order:1,content:(0,a.jsx)(function(){let{setFieldValue:t,values:{phone:e},stepFormRef:n}=P(),{generateOtp:r,isGettingOtp:s}=(0,i.As)(),l=(0,o.useCallback)(e=>{t("phone",e),t("otp","")},[t]),c=(0,o.useCallback)(()=>{r({phoneNumberWithCountryCode:e.replaceAll("+","").replaceAll(" ","").replaceAll("-","")}).then(()=>{n.current&&n.current.gotToStep(u.Otp)}),t("otp","")},[r,t,e,n]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:g().Heading,children:"Enter Whatsapp Number"}),(0,a.jsx)("div",{className:(0,h.t)("mt-2",g().SubHeading),children:"We'll have to make sure it's you."}),(0,a.jsx)("label",{className:(0,h.t)("mt-4",g().Label),children:"Mobile Number"}),(0,a.jsx)(p,{className:"w-100 mt-2",value:e,onChange:l}),(0,a.jsx)("div",{className:(0,h.t)("mt-2",g().Small),children:"We will send a verification otp on your number to verify your number."}),(0,a.jsx)(v.A,{disabled:s,onClick:c,className:(0,h.t)("w-100","mt-4 mt-md-5",g().Button),children:s?"Please wait...":"Send OTP"})]})},{})},{id:u.Otp,order:1,content:(0,a.jsx)(function(){let{isSubmittingOtp:t,values:{phone:e,otp:n},setFieldValue:r,stepFormRef:s,errors:i}=P(),l=!!i.otp||t,c=(0,o.useCallback)(()=>{s.current&&s.current.gotToStep(u.Phone)},[s]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:g().Heading,children:"Verify Your Number"}),(0,a.jsx)("div",{className:(0,h.t)("mt-2",g().SubHeading),children:"Enter the OTP sent to"}),(0,a.jsxs)("div",{className:(0,h.t)("mt-1",g().PhoneDisplay),children:[e,(0,a.jsx)(v.A,{variant:"ghost",size:"sm",onClick:c,children:(0,a.jsx)(k.A,{src:"/assets/images/icons/edit.svg",alt:"Info",height:16,width:16})})]}),(0,a.jsx)("label",{className:(0,h.t)("mt-4",g().Label),children:"OTP"}),(0,a.jsx)(y,{className:"mt-2",value:n,onChange:t=>{r("otp",t)}}),(0,a.jsx)(v.A,{disabled:l,className:(0,h.t)("w-100","mt-4 mt-md-5",g().Button),type:"submit",children:t?"Please wait...":"Proceed"})]})},{})}],j=function(t){let{className:e}=t,[n,l]=(0,o.useState)(!1),h=(0,r.useRouter)(),{verifyOtp:c}=(0,i.As)(),d=(0,o.useRef)(null),_=(0,o.useCallback)(t=>{n||(l(!0),c({otp:t.otp}).then(()=>{h.push("/welcome")}).finally(()=>{l(!1)}))},[n,c,h]),m=(0,o.useMemo)(()=>({isSubmittingOtp:n}),[n]);return(0,a.jsx)(s.A,{ref:d,className:e,extraFields:m,initialValues:B,yupValidationSchema:S,onSubmit:_,initialStepId:u.Phone,steps:C})}},61781:t=>{t.exports={Container:"OtpField_Container__eAguj",Input:"OtpField_Input__xzhuh"}},67666:(t,e,n)=>{"use strict";n.d(e,{A:()=>r});var a=n(95155),o=n(66766);let r=function(t){let{src:e,alt:n,width:r,height:s,className:i}=t;return(0,a.jsx)(o.default,{src:e,alt:n,width:r,height:s,className:i})}},82855:(t,e,n)=>{"use strict";function a(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return(e=(e=Array.from(new Set(e))).filter(Boolean)).join(" ")}n.d(e,{t:()=>a})},83554:(t,e,n)=>{Promise.resolve().then(n.t.bind(n,33063,23)),Promise.resolve().then(n.bind(n,49836)),Promise.resolve().then(n.bind(n,60040)),Promise.resolve().then(n.t.bind(n,37244,23)),Promise.resolve().then(n.t.bind(n,50418,23))},83660:t=>{t.exports={Button:"AuthenticationForm_Button__v_7mk",Heading:"AuthenticationForm_Heading__D1NbZ",SubHeading:"AuthenticationForm_SubHeading__4X5o_",Label:"AuthenticationForm_Label__sbeYb",Small:"AuthenticationForm_Small__l3N8b",PhoneDisplay:"AuthenticationForm_PhoneDisplay__1BEpb"}},90147:t=>{t.exports={Button:"Button_Button__R3Zme",ButtonGhost:"Button_ButtonGhost__60Vkw",ButtonPrimary:"Button_ButtonPrimary__Fz5fM",ButtonSecondary:"Button_ButtonSecondary__3yTUY",ButtonDisabled:"Button_ButtonDisabled__JX7Ng",ButtonSmall:"Button_ButtonSmall__cPUf_",ButtonMedium:"Button_ButtonMedium__P78u0",ButtonLarge:"Button_ButtonLarge__S7Z_W"}}},t=>{var e=e=>t(t.s=e);t.O(0,[306,217,981,558,687,224,563,441,684,358],()=>e(83554)),_N_E=t.O()}]);