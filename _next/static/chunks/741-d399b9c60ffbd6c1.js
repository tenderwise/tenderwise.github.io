(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[741],{4407:e=>{e.exports={Container:"PhoneField_Container__EtH3i",Input:"PhoneField_Input__dCT3d",Button:"PhoneField_Button__O8Eae"}},15616:(e,t,s)=>{"use strict";s.d(t,{Ay:()=>d,sf:()=>i,l9:()=>l});var r=s(95155),n=s(12115),a=s(67959);let i=()=>(0,a.mN)(),o=(0,n.createContext)({}),l=()=>(0,n.useContext)(o),u=function(e){let{children:t}=e,{values:s,errors:a,steps:l=[],activeStepIndex:u,...c}=i(),{stepsListValidationData:d,stepsValidationDataMap:h}=(0,n.useMemo)(()=>{let e=l.map(e=>{let{isCompletedValidatorFunction:t}=e;if(!t)return{stepId:e.id,completed:!0};let{completed:r}=t({values:s,extraFields:c,errors:a});return{stepId:e.id,completed:r}}),t=e.reduce((e,t)=>({...e,[t.stepId]:t}),{});return{stepsListValidationData:e,stepsValidationDataMap:t}},[s,c,a,l]),_=(0,n.useMemo)(()=>d[u],[u,d]),p=null==_?void 0:_.completed,m=u===l.length-1,g=(0,n.useMemo)(()=>l.sort((e,t)=>e.order-t.order).find((e,t)=>{let{completed:s}=d[t];return!s})||null,[l,d]),v=(0,n.useMemo)(()=>({isCurrentStepCompleted:p,stepsListValidationData:d,lastIncompleteStep:g,stepsValidationDataMap:h,isOnLastStep:m}),[p,d,g,h,m]);return(0,r.jsx)(o.Provider,{value:v,children:t})},c=(0,n.forwardRef)(function(e,t){let{steps:s,initialStepId:i,extraFields:o,className:l,onStepChange:c,children:d,...h}=e,_=(0,n.useRef)(null),p=(0,n.useMemo)(()=>{let e=[...s];return e.sort((e,t)=>e.order-t.order),e},[s]),m=(0,n.useMemo)(()=>p.reduce((e,t)=>({...e,[t.id]:t}),{}),[p]),[g,v]=(0,n.useState)(()=>p.findIndex(e=>e.id===i)||0),[f,y]=(0,n.useState)(i||null),A=f?m[f]:null,b=(0,n.useCallback)(e=>{y(e),c&&c({activeStepId:e,activeStep:m[e]})},[c,m]),x=(0,n.useCallback)(()=>{if(0===g)return;let e=Math.max(0,g-1);v(e),b(p[e].id)},[g,b,p]),k=(0,n.useCallback)(()=>{if(g===p.length-1)return;let e=Math.min(p.length-1,g+1);v(e),b(p[e].id)},[g,b,p]),S=(0,n.useMemo)(()=>({...o,activeStepIndex:g,activeStepId:f,activeStep:A,nextStep:k,previousStep:x,gotToStep:b,stepFormRef:_,steps:p}),[o,g,f,A,k,x,b,p]);return(0,n.useImperativeHandle)(t,()=>(_.current={activeStepIndex:g,activeStepId:f,activeStep:A,nextStep:k,previousStep:x,gotToStep:b},_.current),[g,f,A,k,x,b]),(0,r.jsx)(a.Ay,{...h,extraFields:S,initialValues:h.initialValues,children:e=>{let{context:{submitForm:t}}=e;return(0,r.jsx)("form",{className:l,onSubmit:t,children:(0,r.jsx)(u,{children:d?d({...e,children:(null==A?void 0:A.content)||null}):(0,r.jsx)(r.Fragment,{children:(null==A?void 0:A.content)||null})})})}})});c.displayName="StepForm";let d=c},17476:(e,t,s)=>{"use strict";s.d(t,{A:()=>i});var r=s(95155),n=s(6874),a=s(92532);let i=function(e){let{href:t,children:s,...n}=e;return(0,r.jsx)(a.N,{href:t,...n,children:s})}},21178:e=>{e.exports={Error:"FormError_Error__eRI_X"}},29629:(e,t,s)=>{"use strict";s.d(t,{g:()=>n,j:()=>i,useAuth:()=>a});var r=s(12115);let n=(0,r.createContext)({}),a=()=>(0,r.useContext)(n),i=!1},31741:(e,t,s)=>{"use strict";s.d(t,{Kp:()=>k,a:()=>S,Nz:()=>N,av:()=>B});var r=s(94971),n=s(95920),a=s(86266),i=s(23464),o=s(45009),l=s.n(o),u=s(48973),c=s.n(u);let d="TOKEN";var h=new WeakMap,_=new WeakMap,p=new WeakMap,m=new WeakMap;class g{constructor(e){var t=this;(0,n._)(this,h,{writable:!0,value:void 0}),(0,n._)(this,_,{writable:!0,value:void 0}),(0,n._)(this,p,{writable:!0,value:void 0}),(0,n._)(this,m,{writable:!0,value:void 0}),(0,a._)(this,h,"@".concat("TENDERWISE",":API")),(0,a._)(this,p,""),(0,a._)(this,m,!0),this.getAuthToken=()=>{if((0,r._)(this,m)&&"undefined"!=typeof localStorage)try{let e=JSON.parse(localStorage.getItem(d)||"{}"),t=c()(e,"token");(0,a._)(this,p,t)}catch(e){}return(0,r._)(this,p)?"Bearer ".concat((0,r._)(this,p)):""},this.setAuthToken=e=>{(0,a._)(this,p,e),(0,r._)(this,m)&&"undefined"!=typeof localStorage&&localStorage.setItem(d,JSON.stringify({token:e}))},this.clearAuthToken=()=>{(0,a._)(this,p,""),(0,r._)(this,m)&&"undefined"!=typeof localStorage&&localStorage.removeItem(d)},this.createAxiosInstance=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{baseUrl:""},{baseUrl:s,requestInterceptor:r,responseInterceptor:n,responseErrorInterceptor:o,authToken:l}=e,u=i.A.create({baseURL:s});return l&&(0,a._)(t,p,l),r&&u.interceptors.request.use(async e=>(r&&await r(e),Promise.resolve(e))),(n||o)&&u.interceptors.response.use(async e=>(n&&await n(e),e),async e=>(o&&await o(e),Promise.reject(e))),u},this.get=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t.getAuthToken())throw Error("[".concat((0,r._)(t,h),"]: Auth token is not set, use anonGet method for anonymous get calls"));return l()(s,'headers["Authorization"]',t.getAuthToken()),(0,r._)(t,_).get(e,s)},this.post=function(e,s){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!t.getAuthToken())throw Error("[".concat((0,r._)(t,h),"]: Auth token is not set, use anonPost method for anonymous post calls"));return l()(n,'headers["Authorization"]',t.getAuthToken()),(0,r._)(t,_).post(e,s,n)},this.put=function(e,s){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!t.getAuthToken())throw Error("[".concat((0,r._)(t,h),"]: Auth token is not set, use anonPut method for anonymous put calls"));return l()(n,'headers["Authorization"]',t.getAuthToken()),(0,r._)(t,_).put(e,s,n)},this.delete=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t.getAuthToken())throw Error("[".concat((0,r._)(t,h),"]: Auth token is not set, use anonDelete method for anonymous delete calls"));return l()(s,'headers["Authorization"]',t.getAuthToken()),(0,r._)(t,_).delete(e,s)},this.patch=function(e,s){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!t.getAuthToken())throw Error("[".concat((0,r._)(t,h),"]: Auth token is not set, use anonPatch for anonymous patch calls"));return l()(n,'headers["Authorization"]',t.getAuthToken()),(0,r._)(t,_).patch(e,s,n)},this.anonGet=(e,t)=>(0,r._)(this,_).get(e,t),this.anonPost=(e,t,s)=>(0,r._)(this,_).post(e,t,s),this.anonPut=(e,t,s)=>(0,r._)(this,_).put(e,t,s),this.anonDelete=(e,t)=>(0,r._)(this,_).delete(e,t),this.anonPatch=(e,t,s)=>(0,r._)(this,_).patch(e,t,s),this.mockCall=function(){let{data:e,delayInMs:t=2e3}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise(s=>{setTimeout(()=>{s(e||null)},t)})},(0,a._)(this,_,this.createAxiosInstance(e)),this.getAuthToken()}}var v=s(71962),f=new WeakMap,y=new WeakMap;class A{constructor(e){(0,n._)(this,f,{writable:!0,value:void 0}),(0,n._)(this,y,{writable:!0,value:void 0}),this.uploadDocument=e=>{let{file:t,tenderId:s,uploadCategory:n}=e,a=new FormData;return a.append("tender_id",s),a.append("user_id",(0,r._)(this,y).getUserId()||""),a.append("upload_category",n),a.append("file",t),(0,r._)(this,f).post("/documents/upload_document",a)},(0,a._)(this,f,e.apiService),(0,a._)(this,y,e.authenticationService)}}s(12115);var b=s(32145),x=s(77641);let k=new g({baseUrl:"https://webapp.tenderwise.in/dev/api/v1"}),S=new v.Ht({apiService:k}),N=new b.or({apiService:k,authenticationService:S}),B=new x.cs({apiService:k,authenticationService:S});new A({apiService:k,authenticationService:S})},32145:(e,t,s)=>{"use strict";s.d(t,{or:()=>_,z3:()=>b,dC:()=>x});var r=s(94971),n=s(95920),a=s(86266),i=s(51990);let o=(0,i.Z0)({name:"TAG",initialState:{tags:[]},reducers:{addTags:(e,t)=>{let{tags:s,replaceData:r,replaceList:n}=t.payload;e.tags=function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{replaceData:r,replaceList:n,itemIdKey:a="id",oldNewItemCombineFunction:i}=s;return n?t:(t.forEach(t=>{let s=t[a],n=e.findIndex(e=>e.id===s);if(-1===n)e.unshift(t);else if(r)e[n]=t,e=[...e];else{let s=e[n],r=i?i(s,t):{...s,...t};e[n]=r}}),e)}(e.tags,s,{replaceData:r,replaceList:n})},removeTags:(e,t)=>{var s;let{idList:r}=t.payload;s=e.tags,e.tags=s.filter(e=>!r.includes(e.id))}}}),l=o.actions,u=o.reducer,c=(0,i.U1)({reducer:{tag:u},middleware:e=>e()});var d=new WeakMap,h=new WeakMap;class _{constructor(e){(0,n._)(this,d,{writable:!0,value:void 0}),(0,n._)(this,h,{writable:!0,value:void 0}),this.fetchTagByIds=e=>{let{tagIds:t}=e;return(0,r._)(this,d).post("/tags/by_id",{tag_ids:t,user_id:(0,r._)(this,h).getUserId()}).then(e=>{let t=e.data;return c.dispatch(l.addTags({tags:t})),{tags:t}})},this.fetchTags=e=>{let{type:t,parentId:s}=e;return(0,r._)(this,d).post("/tags",{type:t,user_id:(0,r._)(this,h).getUserId(),parent_id:s}).then(e=>{let t=e.data.data;return c.dispatch(l.addTags({tags:t})),{tags:t}})},this.addTag=e=>{let{tag:t}=e;return(0,r._)(this,d).post("/tags/insert_or_update",{...t,tag:"static_data"}).then(e=>e.data)},this.updateTag=e=>{let{tag:t}=e;return(0,r._)(this,d).post("/tags/insert_or_update",t)},(0,a._)(this,d,e.apiService),(0,a._)(this,h,e.authenticationService)}}var p=s(26072),m=s(12115),g=s(67206),v=s.n(g),f=s(39608),y=s.n(f),A=s(31741);let b=function(e){let{tagIds:t=[]}=e,s=(0,m.useMemo)(()=>y()(t)&&0!==t.length?((t||[]).sort(),t.map(e=>"tag/".concat(e))):null,[t]),{data:r,error:n,isLoading:a,mutate:i}=(0,p.Ay)(s,()=>A.Nz.fetchTagByIds({tagIds:t}).then(e=>{let{tags:t}=e;return v()(t,"id")}),{dedupingInterval:3e4});return{tags:r||[],error:n,isLoading:a,isUpdating:void 0!==r&&a,refresh:()=>i(),noData:!a&&!r}},x=function(e){let{type:t,parentId:s}=e,{data:r,error:n,isLoading:a,mutate:i}=(0,p.Ay)("tag/".concat(t,"_").concat(s),()=>A.Nz.fetchTags({type:t,parentId:s}),{dedupingInterval:3e4}),o=void 0!==r&&a,l=!a&&!r;return{tags:(null==r?void 0:r.tags)||[],error:n,isLoading:a,isUpdating:o,refresh:()=>i(),noData:l}}},32768:(e,t,s)=>{"use strict";s.d(t,{default:()=>i});var r=s(12115),n=s(26072),a=s(31741);let i=function(){let{data:e,isLoading:t,error:s,mutate:i}=(0,n.Ay)("/user_info/fetch",()=>a.a.fetchUserDetails(),{errorRetryCount:1,revalidateOnFocus:!1,shouldRetryOnError:!1});return{data:e,isLoading:t,error:s,update:(0,r.useCallback)(async e=>{await a.a.saveUserDetails({userPreferences:e}),i({userPreferences:e,success:!0})},[i])}}},34309:(e,t,s)=>{"use strict";s.d(t,{A:()=>c});var r=s(95155),n=s(36292),a=s(82855),i=s(17476),o=s(90147),l=s.n(o);let u=(0,s(74466).F)(l().Button,{variants:{variant:{primary:l().ButtonPrimary,secondary:l().ButtonSecondary,ghost:l().ButtonGhost},disabled:{true:l().ButtonDisabled,false:void 0},size:{sm:l().ButtonSmall,md:l().ButtonMedium,lg:l().ButtonLarge},color:{primary:l().ButtonColorPrimary,black:l().ButtonBlack,gray:l().ButtonGray,red:l().ButtonRed}},defaultVariants:{color:"primary",variant:"primary",size:"md"}}),c=function(e){let{children:t,className:s,variant:o,size:c,fakeDisabled:d,color:h,linkProps:_,...p}=e,{...m}=p,g=p.disabled||!1;return _?(0,r.jsx)(i.A,{..._,isDisabled:g,className:(0,a.t)(l().Button,u({variant:o,disabled:d||g,size:c,color:h}),s),children:t}):(0,r.jsx)(n.$,{isDisabled:g,className:(0,a.t)(l().Button,u({variant:o,disabled:d||g,size:c,color:h}),s),...m,children:t})};s(12115)},37244:e=>{e.exports={Container:"Layout_Container__8QhIo",Header:"Layout_Header__f_3V0",Main:"Layout_Main__KyruP",HeaderRightSection:"Layout_HeaderRightSection__ocSBD",RoundButton:"Layout_RoundButton__6Bjo4",AppTabBar:"Layout_AppTabBar__i6Dk4",FormContainer:"Layout_FormContainer__8ims9"}},50418:e=>{e.exports={Layout:"AuthenticationPage_Layout__7Pyd_",Main:"AuthenticationPage_Main__gll00",FormContainer:"AuthenticationPage_FormContainer__NwHe6"}},61781:e=>{e.exports={Container:"OtpField_Container__eAguj",Input:"OtpField_Input__xzhuh"}},64762:(e,t,s)=>{"use strict";s.d(t,{A:()=>y});var r=s(95155),n=s(17476),a=s(82855),i=s(65504),o=s(93162),l=s(34309),u=s(67666),c=s(35695),d=s(79510),h=s.n(d);let _=e=>{let{icon:t,label:s,link:i}=e,o=(0,c.usePathname)();return(0,r.jsxs)(n.A,{href:i,className:(0,a.t)(h().NavItem,i===o&&h().NavItemActive),children:[(0,r.jsx)(u.A,{className:h().Icon,src:t,alt:"",width:20,height:20}),(0,r.jsx)("span",{className:h().Label,children:s})]})},p=function(e){let{className:t}=e;return(0,r.jsxs)("nav",{className:(0,a.t)(t,h().Container),children:[(0,r.jsx)(_,{label:"Home",icon:"/assets/images/icons/home.svg",link:o.f.HOME_PAGE}),(0,r.jsx)(_,{label:"Search",icon:"/assets/images/icons/search.svg",link:"#"}),(0,r.jsx)(_,{label:"My Tenders",icon:"/assets/images/icons/suitcase.svg",link:o.f.TENDERS_PAGE}),(0,r.jsx)(_,{label:"My Profile",icon:"/assets/images/icons/user_outline.svg",link:"#"})]})};var m=s(71962);let g=function(e){let{logout:t}=(0,m.As)();return(0,r.jsx)(l.A,{variant:"ghost",size:"sm",...e,onClick:t,children:e.children||"Logout"})};var v=s(37244),f=s.n(v);let y=function(e){let{children:t,className:s,mainClassName:c,appendHeader:d,appendActionButtons:h,showNotificationAction:_=!0,showSearchAction:m=!0}=e;return(0,r.jsx)("div",{className:s,children:(0,r.jsxs)("div",{className:(0,a.t)(f().Container,"container"),children:[(0,r.jsxs)("header",{className:f().Header,children:[(0,r.jsx)(n.A,{href:o.f.HOME_PAGE,children:(0,r.jsx)(i.A,{})}),(!!h||_||m)&&(0,r.jsxs)("div",{className:f().HeaderRightSection,children:[m&&(0,r.jsx)(l.A,{className:f().RoundButton,color:"gray",children:(0,r.jsx)(u.A,{src:"/assets/images/icons/search.svg",alt:"Info",height:18,width:18})}),_&&(0,r.jsx)(l.A,{className:f().RoundButton,color:"gray",children:(0,r.jsx)(u.A,{src:"/assets/images/icons/bell.svg",alt:"Info",height:18,width:18})}),(0,r.jsx)(g,{color:"red"}),h]}),d]}),(0,r.jsx)("main",{className:(0,a.t)(f().Main,c),children:t}),(0,r.jsx)(p,{className:f().AppTabBar})]})})}},65504:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});var r=s(95155),n=s(67666);let a=function(e){let{className:t}=e;return(0,r.jsx)(n.A,{className:t,src:"/assets/images/branding/tenderwise_logo.svg",alt:"Tenderwise logo",height:40,width:140})}},67666:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});var r=s(95155),n=s(66766);let a=function(e){let{src:t,alt:s,width:a,height:i,className:o}=e;return(0,r.jsx)(n.default,{src:t,alt:s,width:a,height:i,className:o})}},67959:(e,t,s)=>{"use strict";s.d(t,{jQ:()=>v,Ay:()=>_,mN:()=>d});var r=s(95155),n=s(12115),a=s(49694),i=s(40139),o=s.n(i),l=s(48973),u=s.n(l);let c=n.createContext({});function d(){return n.useContext(c)}function h(e){let{initialValues:t={},yupValidationSchema:s,children:i,onSubmit:l,extraFields:d,onChange:h}=e,_=(0,n.useCallback)(e=>{l&&l(e)},[l]),p=(0,a.Wx)({initialValues:t,onSubmit:_,validationSchema:s,validateOnMount:!0}),{values:m,errors:g,touched:v,setFieldValue:f,handleSubmit:y,setFieldTouched:A}=p,b=(0,n.useCallback)(e=>!!u()(g,e,!1)&&!!u()(v,e,!1),[g,v]),x=!!Object.keys(g).length,k=(0,n.useMemo)(()=>({values:m,errors:g,touched:v,setFieldValue:f,submitForm:y,setFieldTouched:A,touchedAndHasError:b,hasError:x,...d}),[m,g,v,f,y,A,b,d,x]);return(0,n.useEffect)(()=>{h&&h(m,{hasError:x})},[h,m,x]),(0,r.jsx)(c.Provider,{value:k,children:(0,r.jsx)(a.QI,{value:p,children:o()(i)?i({context:k}):i})})}let _=function(e){return(0,r.jsx)(h,{...e})};var p=s(82855),m=s(21178),g=s.n(m);let v=e=>{let{fieldKey:t,className:s,children:n}=e,{touchedAndHasError:a,errors:i}=d(),o=u()(i,t);return o&&a(t)?(0,r.jsx)("div",{className:(0,p.t)(g().Error,s),children:n||o}):null}},71962:(e,t,s)=>{"use strict";s.d(t,{Ht:()=>g,TM:()=>f,As:()=>v.useAuth,RB:()=>y.default});var r=s(94971),n=s(95920),a=s(86266),i=s(48973),o=s.n(i),l=s(45009),u=s.n(l),c=s(78966),d=s.n(c);function h(e){let{userPreferences:t}=e,s=d()(t);["location.state","location.districts","location.town","location.locality","location.locality_village"].forEach(e=>{o()(s,e)||u()(s,e,[])});try{"string"==typeof s.keywords&&(s.keywords=JSON.parse(s.keywords)||[])}catch(e){s.keywords=[]}Array.isArray(s.emd)&&2===s.emd.length||(s.emd=[0,0]),Array.isArray(s.value)&&2===s.value.length||(s.value=[0,0]);try{if("string"==typeof s.authority_tenders_completed_count){let e=JSON.parse(s.authority_tenders_completed_count);s.authority_tenders_completed_count="number"==typeof e?String(e):"0"}}catch(e){s.authority_tenders_completed_count="0"}s.business_category||(s.business_category={}),s.product_category||(s.product_category={}),s.authority||(s.authority={});try{"string"==typeof s.metadata&&(s.metadata=JSON.parse(s.metadata)||{})}catch(e){s.metadata={}}return{userPreferencesSanitized:s}}let _="USER_DATA";var p=new WeakMap,m=new WeakMap;class g{constructor(e){(0,n._)(this,p,{writable:!0,value:void 0}),(0,n._)(this,m,{writable:!0,value:void 0}),(0,a._)(this,m,null),this.checkUserExists=e=>{let{phoneNumberWithCountryCode:t}=e;return(0,r._)(this,p).anonPost("/auth/user_exist_check?user_id=".concat(t)).then(e=>e.data)},this.generateOtp=e=>{let{phoneNumberWithCountryCode:t}=e;return this.setUserId({userId:t}),(0,r._)(this,p).anonPost("/auth/generate_otp?user_id=".concat(t),{user_id:t}).then(e=>e.data)},this.verifyOtp=async e=>{let{otp:t,token:s}=e;return(0,r._)(this,p).anonPost("/auth/verify_otp",{otp:t,user_id:this.getUserId()},{headers:{Authorization:"Bearer ".concat(s)}}).then(e=>e.data)},this.fetchUserDetails=()=>(0,r._)(this,p).post("/users/fetch_preferences",{user_id:this.getUserId()}).then(e=>({userPreferences:h({userPreferences:e.data.data}).userPreferencesSanitized,success:!0})),this.saveUserDetails=e=>{let{userPreferences:t}=e,s={...t,user_id:this.getUserId()};return(0,r._)(this,p).put("/users/update_preferences",s).then(()=>({success:!0}))},this.saveUserDetailsPartial=e=>{let{userPreferences:t}=e,s={...t,user_id:this.getUserId()||""};return s=h({userPreferences:s}).userPreferencesSanitized,(0,r._)(this,p).patch("/users/update_preferences_partial",s).then(()=>({success:!0}))},this.mockFetchUserDetails=()=>{let e=null;if("undefined"!=typeof localStorage)try{e=JSON.parse(localStorage.getItem("TENDERWISE:USER_DETAILS")||"{}")}catch(t){e=null}return this.fetchUserDetails(),(0,r._)(this,p).mockCall().then(()=>({userDetails:e}))},this.mockSaveUserDetails=e=>{let{userPreferences:t}=e;return"undefined"!=typeof localStorage&&localStorage.setItem("TENDERWISE:USER_DETAILS",JSON.stringify(t)),this.saveUserDetailsPartial({userPreferences:t}),(0,r._)(this,p).mockCall().then(()=>({success:!0}))},this.setUserId=e=>{let{userId:t}=e;return"undefined"!=typeof localStorage&&localStorage.setItem(_,JSON.stringify({user_id:t})),(0,a._)(this,m,t),(0,r._)(this,m)},this.getUserId=()=>{if("undefined"!=typeof localStorage)try{let e=JSON.parse(localStorage.getItem(_)||"{}"),t=o()(e,"user_id");(0,a._)(this,m,t)}catch(e){}return(0,r._)(this,m)},this.resetUserId=()=>("undefined"!=typeof localStorage&&localStorage.removeItem(_),(0,a._)(this,m,null),(0,r._)(this,m)),(0,a._)(this,p,e.apiService),this.getUserId()}}s(90183);var v=s(29629),f=function(e){return e.English="en",e.Hindi="hi",e.Marathi="mr",e.None="",e}({}),y=s(32768)},77641:(e,t,s)=>{"use strict";s.d(t,{cs:()=>l,oC:()=>p,s_:()=>h,FX:()=>d});var r=s(94971),n=s(95920),a=s(86266),i=new WeakMap,o=new WeakMap;class l{constructor(e){(0,n._)(this,i,{writable:!0,value:void 0}),(0,n._)(this,o,{writable:!0,value:void 0}),this.fetchTendersList=e=>{let{limit:t=30,offset:s=0}=e;return(0,r._)(this,i).post("/tenders/view_all_tenders",{user_id:(0,r._)(this,o).getUserId(),limit:t,offset:s}).then(e=>({tenders:e.data}))},this.fetchTenderById=e=>{let{tenderId:t}=e;return(0,r._)(this,i).post("/tenders/single_page_view",{user_id:(0,r._)(this,o).getUserId(),tender_id:t}).then(e=>({tendersDetails:e.data}))},this.addTenderToInterestedList=e=>{let{tenderId:t}=e;return(0,r._)(this,i).post("/tenders/add_event",{user_id:(0,r._)(this,o).getUserId(),tender_id:t,event_type:"interest",event_data:{interest:"yes"}})},this.removeTenderFromInterestedList=e=>{let{tenderId:t}=e;return(0,r._)(this,i).post("/tenders/add_event",{user_id:(0,r._)(this,o).getUserId(),tender_id:t,event_type:"interest",event_data:{interest:"no"}})},this.createWorkOrder=e=>(0,r._)(this,i).post("/users/work-orders",{user_id:(0,r._)(this,o).getUserId(),...e}),this.getWorkOrderById=e=>{let{workOrderId:t}=e;return(0,r._)(this,i).post("/users/work-orders/get",{user_id:(0,r._)(this,o).getUserId(),work_order_id:t})},this.getWorkOrders=()=>(0,r._)(this,i).post("/users/work-orders/list",{user_id:(0,r._)(this,o).getUserId()}),this.updateWorkOrder=e=>(0,r._)(this,i).post("/users/work-orders/update",{user_id:(0,r._)(this,o).getUserId(),...e}),this.deleteWorkOrder=e=>{let{workOrderId:t}=e;return(0,r._)(this,i).post("/users/work-orders/delete",{user_id:(0,r._)(this,o).getUserId(),work_order_id:t})},(0,a._)(this,i,e.apiService),(0,a._)(this,o,e.authenticationService)}}var u=s(26072),c=s(31741);let d=function(){let{limit:e=30,offset:t=0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{data:s,error:r,isLoading:n,mutate:a}=(0,u.Ay)("tag/".concat(e,"_").concat(t),()=>c.av.fetchTendersList({limit:e,offset:t}).then(e=>e.tenders),{dedupingInterval:3e4});return{tenders:s||[],error:r,isLoading:n,isUpdating:void 0!==s&&n,refresh:()=>a(),noData:!n&&!s}},h=function(e){let{tenderId:t}=e,{data:s,error:r,isLoading:n,mutate:a}=(0,u.Ay)(t?"/tenders/single_page_view/".concat(t):"",()=>c.av.fetchTenderById({tenderId:t}).then(e=>e.tendersDetails),{dedupingInterval:3e4});return{tenderDetails:s||null,error:r,isLoading:n,isUpdating:void 0!==s&&n,refresh:()=>a(),noData:!n&&!s}};s(12115);var _=s(93162);function p(e){let{tenderId:t}=e;return"".concat(_.f.TENDERS_PAGE,"/details?tender_id=").concat(t)}},79510:e=>{e.exports={Container:"AppTabBar_Container__2UFXP",NavItem:"AppTabBar_NavItem__abfL3",NavItemActive:"AppTabBar_NavItemActive__x0oKN",Label:"AppTabBar_Label__4bL65",Icon:"AppTabBar_Icon__Sfl98"}},82855:(e,t,s)=>{"use strict";function r(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(t=(t=Array.from(new Set(t))).filter(Boolean)).join(" ")}s.d(t,{t:()=>r})},83660:e=>{e.exports={Button:"AuthenticationForm_Button__v_7mk",Heading:"AuthenticationForm_Heading__D1NbZ",SubHeading:"AuthenticationForm_SubHeading__4X5o_",Label:"AuthenticationForm_Label__sbeYb",Small:"AuthenticationForm_Small__l3N8b",PhoneDisplay:"AuthenticationForm_PhoneDisplay__1BEpb",ErrorText:"AuthenticationForm_ErrorText___QNLF",ResendButton:"AuthenticationForm_ResendButton__gLM1r"}},90147:e=>{e.exports={Button:"Button_Button__R3Zme",ButtonPrimary:"Button_ButtonPrimary__Fz5fM",ButtonSecondary:"Button_ButtonSecondary__3yTUY",ButtonGhost:"Button_ButtonGhost__60Vkw",ButtonDisabled:"Button_ButtonDisabled__JX7Ng",ButtonSmall:"Button_ButtonSmall__cPUf_",ButtonMedium:"Button_ButtonMedium__P78u0",ButtonLarge:"Button_ButtonLarge__S7Z_W",ButtonBlack:"Button_ButtonBlack__Qgqmf",ButtonGray:"Button_ButtonGray__CCvYs",ButtonRed:"Button_ButtonRed__NqmgO",ButtonColorPrimary:"Button_ButtonColorPrimary__VHKqe"}},90183:(e,t,s)=>{"use strict";s.d(t,{default:()=>U});var r=s(95155),n=s(12115),a=s(31741),i=s(35695),o=s(15616),l=s(71962),u=function(e){return e.Phone="phone",e.Otp="otp",e}({}),c=s(37129),d=s(82855),h=s(39365),_=s.n(h),p=s(4407),m=s.n(p);s(30133);let g=function(e){let{className:t,value:s,onChange:a}=e,i=(0,n.useCallback)(function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];a&&a(t[3])},[a]);return(0,r.jsx)(_(),{disableDropdown:!0,country:"in",containerClass:(0,d.t)(m().Container,t),inputClass:m().Input,buttonClass:m().Button,value:s,onChange:i,placeholder:"Enter Your Mobile Number",inputProps:{name:"phone",autocomplete:"phone"}})};var v=s(34309),f=s(83660),y=s.n(f),A=s(23293),b=s(61781),x=s.n(b);let k=function(e){let{className:t,value:s,onChange:a}=e,[i,o]=(0,n.useState)(""),l=void 0!==s&&void 0!==a;return(0,r.jsx)(A.A,{containerStyle:(0,d.t)(t,x().Container),value:l?s:i,onChange:l?a:o,numInputs:6,renderInput:e=>(0,r.jsx)("input",{...e,type:"number",pattern:"[0-9]*",inputMode:"numeric",className:x().Input}),placeholder:"------"})};var S=s(67666);let N=o.sf,B={phone:"",otp:""},I=c.Ik().shape({phone:c.Yj().required(),otp:c.Yj().min(6).max(6).required()}),w=[{id:u.Phone,order:1,content:(0,r.jsx)(function(){let{setFieldValue:e,values:{phone:t},stepFormRef:s,setOtpResendTime:a,setOtpError:i,setIsOtpSent:o}=N(),{generateOtp:c,isGettingOtp:h}=(0,l.As)(),_=(0,n.useCallback)(t=>{e("phone",t),e("otp","")},[e]),p=(0,n.useCallback)(()=>{c({phoneNumberWithCountryCode:t.replaceAll("+","").replaceAll(" ","").replaceAll("-","")}).then(()=>{e("otp",""),a(30),o(!0),i(null),s.current&&s.current.gotToStep(u.Otp)})},[c,e,t,s,o,a,i]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:y().Heading,children:"Enter Whatsapp Number"}),(0,r.jsx)("div",{className:(0,d.t)("mt-2",y().SubHeading),children:"We'll have to make sure it's you."}),(0,r.jsx)("label",{className:(0,d.t)("mt-4",y().Label),children:"Mobile Number"}),(0,r.jsx)(g,{className:"w-100 mt-2",value:t,onChange:_}),(0,r.jsx)("div",{className:(0,d.t)("mt-2",y().Small),children:"We will send a verification otp on your number to verify your number."}),(0,r.jsx)(v.A,{disabled:h,onClick:p,className:(0,d.t)("w-100","mt-4 mt-md-5",y().Button),children:h?"Please wait...":"Send OTP"})]})},{})},{id:u.Otp,order:1,content:(0,r.jsx)(function(){let{isSubmittingOtp:e,values:{phone:t,otp:s},setFieldValue:a,stepFormRef:i,errors:o,submitForm:c,otpError:h,otpResendTime:_,setOtpResendTime:p,setIsOtpSent:m,setOtpError:g}=N(),{generateOtp:f,isGettingOtp:A}=(0,l.As)(),b=!!o.otp||e;(0,n.useEffect)(()=>{if(_>0){let e=setTimeout(()=>{p(_-1)},1e3);return()=>clearTimeout(e)}},[_,p]);let x=(0,n.useCallback)(()=>{i.current&&i.current.gotToStep(u.Phone)},[i]),B=(0,n.useCallback)(async()=>{let e=t.replaceAll("+","").replaceAll(" ","").replaceAll("-","");try{await f({phoneNumberWithCountryCode:e}),a("otp",""),p(30),m(!0),g(null)}catch(e){g(e.message||"Failed to send OTP")}},[f,t,a,p,m,g]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:y().Heading,children:"Verify Your Number"}),(0,r.jsx)("div",{className:(0,d.t)("mt-2",y().SubHeading),children:"Enter the OTP sent to"}),(0,r.jsxs)("div",{className:(0,d.t)("mt-1",y().PhoneDisplay),children:[t,(0,r.jsx)(v.A,{variant:"ghost",size:"sm",onClick:x,children:(0,r.jsx)(S.A,{src:"/assets/images/icons/edit.svg",alt:"Info",height:16,width:16})})]}),(0,r.jsx)("label",{className:(0,d.t)("mt-4",y().Label),children:"OTP"}),(0,r.jsx)(k,{className:"mt-2",value:s,onChange:e=>{a("otp",e)}}),h&&(0,r.jsx)("div",{className:(0,d.t)("mt-2",y().ErrorText),children:h}),(0,r.jsx)("div",{className:(0,d.t)("mt-2",y().Small),children:_>0?"Resend OTP in ".concat(_," seconds"):(0,r.jsx)(v.A,{variant:"ghost",className:y().ResendButton,disabled:A,onClick:B,children:"Resend OTP"})}),(0,r.jsx)(v.A,{disabled:b,className:(0,d.t)("w-100","mt-4 mt-md-5",y().Button),onClick:()=>{c()},children:e?"Please wait...":"Proceed"})]})},{})}];var j=s(93162);let T=function(e){let{className:t}=e,[s,a]=(0,n.useState)(!1),[c,d]=(0,n.useState)(null),[h,_]=(0,n.useState)(!1),[p,m]=(0,n.useState)(0),g=(0,i.useRouter)(),{verifyOtp:v}=(0,l.As)(),f=(0,n.useRef)(null),y=(0,n.useCallback)(async e=>{if(s)return;a(!0);let{otp:t,phone:r}=e;return v({otp:t,phoneNumberWithCountryCode:r.replaceAll("+","").replaceAll(" ","").replaceAll("-","")}).then(e=>{let{isNewUser:t}=e;d(null),t?g.push(j.f.WELCOME_PAGE):g.push(j.f.ONBOARDING_FORM_PAGE)}).catch(e=>{d(e.message||"Invalid OTP. Please try again.")}).finally(()=>{a(!1)})},[s,v,g]),A=(0,n.useMemo)(()=>({isSubmittingOtp:s,setIsSubmittingOtp:a,otpError:c,setOtpError:d,isOtpSent:h,setIsOtpSent:_,otpResendTime:p,setOtpResendTime:m}),[s,c,h,p]);return(0,r.jsx)(o.Ay,{ref:f,className:t,extraFields:A,initialValues:B,yupValidationSchema:I,onSubmit:y,initialStepId:u.Phone,steps:w})};var C=s(64762),P=s(50418),E=s.n(P);let M=function(){return(0,r.jsx)(C.A,{className:E().Layout,mainClassName:E().Main,appendHeader:(0,r.jsx)(v.A,{variant:"ghost",size:"sm",children:(0,r.jsx)(S.A,{src:"/assets/images/icons/info.svg",alt:"Info",height:20,width:20})}),children:(0,r.jsx)("div",{className:(0,d.t)(E().FormContainer),children:(0,r.jsx)(T,{})})})};var O=s(29629);let U=function(e){let{children:t}=e,[s,i]=(0,n.useState)(!1),[o,l]=(0,n.useState)(!0),[u,c]=(0,n.useState)(!1),[d,h]=(0,n.useState)(!0),[_,p]=(0,n.useState)(null),m=(0,n.useCallback)(e=>{let{phoneNumberWithCountryCode:t}=e;return u?Promise.resolve():(c(!0),a.a.generateOtp({phoneNumberWithCountryCode:t}).then(async e=>{let{token:s}=e;a.a.checkUserExists({phoneNumberWithCountryCode:t}).then(e=>{h(!e.data.user_exists)}).catch(()=>{h(!1)}),p(s)}).finally(()=>{c(!1)}))},[u]),g=(0,n.useCallback)(async()=>(a.Kp.clearAuthToken(),l(!1),i(!1),{success:!0}),[]),v=(0,n.useCallback)(async e=>{let{otp:t}=e;return(l(!0),O.j)?(l(!1),i(!0),{isNewUser:!0}):(await a.a.verifyOtp({otp:t,token:_}).then(async e=>{let{token:t}=e;i(!0),t&&a.Kp.setAuthToken(t)}).catch(()=>{g()}).finally(()=>{l(!1)}),{isNewUser:d})},[_,d,g]);(0,n.useEffect)(()=>{i(!!a.Kp.getAuthToken()),l(!1)},[]);let f=(0,n.useMemo)(()=>({isAuthenticated:s,isAuthenticating:o,isGettingOtp:u,generateOtp:m,verifyOtp:v,isNewUser:d,logout:g}),[s,o,u,m,v,d,g]);return(0,r.jsx)(O.g.Provider,{value:f,children:o||!s?(0,r.jsx)(M,{}):t})}},93162:(e,t,s)=>{"use strict";s.d(t,{f:()=>r});let r={HOME_PAGE:"/",ONBOARDING_FORM_PAGE:"/onboard",TENDERS_PAGE:"/tenders",SETTINGS_PAGE:"/settings",WELCOME_PAGE:"/welcome"}}}]);