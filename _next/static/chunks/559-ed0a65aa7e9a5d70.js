(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[559],{4407:e=>{e.exports={Container:"PhoneField_Container__EtH3i",Input:"PhoneField_Input__dCT3d",Button:"PhoneField_Button__O8Eae"}},14186:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var a=n(95155),s=n(38277),r=n(82855),i=n(90147),o=n.n(i);let l=(0,n(74466).F)(o().Button,{variants:{variant:{primary:o().ButtonPrimary,secondary:o().ButtonSecondary,ghost:o().ButtonGhost},disabled:{true:o().ButtonDisabled,false:void 0},size:{sm:o().ButtonSmall,md:o().ButtonMedium,lg:o().ButtonLarge},color:{primary:o().ButtonColorPrimary,black:o().ButtonBlack,gray:o().ButtonGray}},defaultVariants:{color:"primary",variant:"primary",size:"md"}}),u=function(e){let{children:t,className:n,variant:i,size:u,fakeDisabled:c,color:d,...h}=e,{..._}=h,m=h.disabled||!1;return(0,a.jsx)(s.$,{isDisabled:m,className:(0,r.t)(n,o().Button,l({variant:i,disabled:c||m,size:u,color:d})),..._,children:t})}},15559:(e,t,n)=>{"use strict";n.d(t,{Kp:()=>y,a:()=>b,Nz:()=>x,av:()=>k});var a=n(94971),s=n(95920),r=n(86266),i=n(23464),o=n(45009),l=n.n(o),u=n(48973),c=n.n(u);let d="TOKEN";var h=new WeakMap,_=new WeakMap,m=new WeakMap,p=new WeakMap;class v{constructor(e){var t=this;(0,s._)(this,h,{writable:!0,value:void 0}),(0,s._)(this,_,{writable:!0,value:void 0}),(0,s._)(this,m,{writable:!0,value:void 0}),(0,s._)(this,p,{writable:!0,value:void 0}),(0,r._)(this,h,"@".concat("TENDERWISE",":API")),(0,r._)(this,m,""),(0,r._)(this,p,!0),this.getAuthToken=()=>{if((0,a._)(this,p)&&"undefined"!=typeof localStorage)try{let e=JSON.parse(localStorage.getItem(d)||"{}"),t=c()(e,"token");(0,r._)(this,m,t)}catch(e){}return(0,a._)(this,m)?"Bearer ".concat((0,a._)(this,m)):""},this.setAuthToken=e=>{(0,r._)(this,m,e),(0,a._)(this,p)&&"undefined"!=typeof localStorage&&localStorage.setItem(d,JSON.stringify({token:e}))},this.clearAuthToken=()=>{(0,r._)(this,m,""),(0,a._)(this,p)&&"undefined"!=typeof localStorage&&localStorage.removeItem(d)},this.createAxiosInstance=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{baseUrl:""},{baseUrl:n,requestInterceptor:a,responseInterceptor:s,responseErrorInterceptor:o,authToken:l}=e,u=i.A.create({baseURL:n});return l&&(0,r._)(t,m,l),a&&u.interceptors.request.use(async e=>(a&&await a(e),Promise.resolve(e))),(s||o)&&u.interceptors.response.use(async e=>(s&&await s(e),e),async e=>(o&&await o(e),Promise.reject(e))),u},this.get=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t.getAuthToken())throw Error("[".concat((0,a._)(t,h),"]: Auth token is not set, use anonGet method for anonymous get calls"));return l()(n,'headers["Authorization"]',t.getAuthToken()),(0,a._)(t,_).get(e,n)},this.post=function(e,n){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!t.getAuthToken())throw Error("[".concat((0,a._)(t,h),"]: Auth token is not set, use anonPost method for anonymous post calls"));return l()(s,'headers["Authorization"]',t.getAuthToken()),(0,a._)(t,_).post(e,n,s)},this.put=function(e,n){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!t.getAuthToken())throw Error("[".concat((0,a._)(t,h),"]: Auth token is not set, use anonPut method for anonymous put calls"));return l()(s,'headers["Authorization"]',t.getAuthToken()),(0,a._)(t,_).put(e,n,s)},this.delete=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t.getAuthToken())throw Error("[".concat((0,a._)(t,h),"]: Auth token is not set, use anonDelete method for anonymous delete calls"));return l()(n,'headers["Authorization"]',t.getAuthToken()),(0,a._)(t,_).delete(e,n)},this.patch=function(e,n){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!t.getAuthToken())throw Error("[".concat((0,a._)(t,h),"]: Auth token is not set, use anonPatch for anonymous patch calls"));return l()(s,'headers["Authorization"]',t.getAuthToken()),(0,a._)(t,_).patch(e,n,s)},this.anonGet=(e,t)=>(0,a._)(this,_).get(e,t),this.anonPost=(e,t,n)=>(0,a._)(this,_).post(e,t,n),this.anonPut=(e,t,n)=>(0,a._)(this,_).put(e,t,n),this.anonDelete=(e,t)=>(0,a._)(this,_).delete(e,t),this.anonPatch=(e,t,n)=>(0,a._)(this,_).patch(e,t,n),this.mockCall=function(){let{data:e,delayInMs:t=2e3}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise(n=>{setTimeout(()=>{n(e||null)},t)})},(0,r._)(this,_,this.createAxiosInstance(e)),this.getAuthToken()}}var g=n(71962),f=n(65635),A=n(68596);let y=new v({baseUrl:"https://webapp.tenderwise.in/dev/api/v1"}),b=new g.Ht({apiService:y}),x=new f.or({apiService:y}),k=new A.cs({apiService:y})},15616:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>d,sf:()=>i,l9:()=>l});var a=n(95155),s=n(12115),r=n(67959);let i=()=>(0,r.mN)(),o=(0,s.createContext)({}),l=()=>(0,s.useContext)(o),u=function(e){let{children:t}=e,{values:n,errors:r,steps:l,activeStepIndex:u,...c}=i(),{stepsListValidationData:d,stepsValidationDataMap:h}=(0,s.useMemo)(()=>{let e=l.map(e=>{let{isCompletedValidatorFunction:t}=e;if(!t)return{stepId:e.id,completed:!0};let{completed:a}=t({values:n,extraFields:c,errors:r});return{stepId:e.id,completed:a}}),t=e.reduce((e,t)=>({...e,[t.stepId]:t}),{});return{stepsListValidationData:e,stepsValidationDataMap:t}},[n,c,r,l]),{completed:_}=(0,s.useMemo)(()=>d[u],[u,d]),m=(0,s.useMemo)(()=>l.sort((e,t)=>e.order-t.order).find((e,t)=>{let{completed:n}=d[t];return!n})||null,[l,d]),p=(0,s.useMemo)(()=>({isCurrentStepCompleted:_,stepsListValidationData:d,lastIncompleteStep:m,stepsValidationDataMap:h}),[_,d,m,h]);return(0,a.jsx)(o.Provider,{value:p,children:t})},c=(0,s.forwardRef)(function(e,t){let{steps:n,initialStepId:i,extraFields:o,className:l,onStepChange:c,children:d,...h}=e,_=(0,s.useRef)(null),m=(0,s.useMemo)(()=>{let e=[...n];return e.sort((e,t)=>e.order-t.order),e},[n]),p=(0,s.useMemo)(()=>m.reduce((e,t)=>({...e,[t.id]:t}),{}),[m]),[v,g]=(0,s.useState)(()=>m.findIndex(e=>e.id===i)||0),[f,A]=(0,s.useState)(i||null),y=f?p[f]:null,b=(0,s.useCallback)(e=>{A(e),c&&c({activeStepId:e,activeStep:p[e]})},[c,p]),x=(0,s.useCallback)(()=>{if(0===v)return;let e=Math.max(0,v-1);g(e),b(m[e].id)},[v,b,m]),k=(0,s.useCallback)(()=>{if(v===m.length-1)return;let e=Math.min(m.length-1,v+1);g(e),b(m[e].id)},[v,b,m]),B=(0,s.useMemo)(()=>({...o,activeStepIndex:v,activeStepId:f,activeStep:y,nextStep:k,previousStep:x,gotToStep:b,stepFormRef:_,steps:m}),[o,v,f,y,k,x,b,m]);return(0,s.useImperativeHandle)(t,()=>(_.current={activeStepIndex:v,activeStepId:f,activeStep:y,nextStep:k,previousStep:x,gotToStep:b},_.current),[v,f,y,k,x,b]),(0,a.jsx)(r.Ay,{...h,extraFields:B,initialValues:h.initialValues,children:e=>{let{context:{submitForm:t}}=e;return(0,a.jsx)("form",{className:l,onSubmit:t,children:(0,a.jsx)(u,{children:d?d({...e,children:(null==y?void 0:y.content)||null}):(0,a.jsx)(a.Fragment,{children:(null==y?void 0:y.content)||null})})})}})});c.displayName="StepForm";let d=c},21178:e=>{e.exports={Error:"FormError_Error__eRI_X"}},29629:(e,t,n)=>{"use strict";n.d(t,{g:()=>s,useAuth:()=>r});var a=n(12115);let s=(0,a.createContext)({}),r=()=>(0,a.useContext)(s)},32768:(e,t,n)=>{"use strict";n.d(t,{default:()=>i});var a=n(12115),s=n(26072),r=n(15559);let i=function(){let{data:e,isLoading:t,error:n,mutate:i}=(0,s.Ay)("/user_info/fetch",()=>r.a.fetchUserDetails());return{data:e,isLoading:t,error:n,update:(0,a.useCallback)(async e=>{await r.a.saveUserDetails({userPreferences:e}),i({userPreferences:e,success:!0})},[i])}}},37244:e=>{e.exports={Container:"Layout_Container__8QhIo",Header:"Layout_Header__f_3V0",Main:"Layout_Main__KyruP",HeaderRightSection:"Layout_HeaderRightSection__ocSBD",RoundButton:"Layout_RoundButton__6Bjo4",AppTabBar:"Layout_AppTabBar__i6Dk4",FormContainer:"Layout_FormContainer__8ims9"}},42019:(e,t,n)=>{"use strict";n.d(t,{A:()=>f});var a=n(95155),s=n(6874),r=n.n(s),i=n(82855),o=n(67666);let l=function(e){let{className:t}=e;return(0,a.jsx)(o.A,{className:t,src:"/assets/images/branding/tenderwise_logo.svg",alt:"Tenderwise logo",height:40,width:140})};var u=n(93162),c=n(37244),d=n.n(c),h=n(14186),_=n(35695),m=n(79510),p=n.n(m);let v=e=>{let{icon:t,label:n,link:s}=e,l=(0,_.usePathname)();return(0,a.jsxs)(r(),{href:s,className:(0,i.t)(p().NavItem,s===l&&p().NavItemActive),children:[(0,a.jsx)(o.A,{src:t,alt:"",width:20,height:20}),(0,a.jsx)("span",{className:p().Label,children:n})]})},g=function(e){let{className:t}=e;return(0,a.jsxs)("nav",{className:(0,i.t)(t,p().Container),children:[(0,a.jsx)(v,{label:"Home",icon:"/assets/images/icons/home.svg",link:u.f.HOME_PAGE}),(0,a.jsx)(v,{label:"-",icon:"/assets/images/icons/graph.svg",link:"#"}),(0,a.jsx)(v,{label:"My Tenders",icon:"/assets/images/icons/suitcase.svg",link:u.f.TENDERS_PAGE}),(0,a.jsx)(v,{label:"My Profile",icon:"/assets/images/icons/user.svg",link:"#"})]})},f=function(e){let{children:t,className:n,mainClassName:s,appendHeader:c}=e;return(0,a.jsx)("div",{className:n,children:(0,a.jsxs)("div",{className:(0,i.t)(d().Container,"container"),children:[(0,a.jsxs)("header",{className:d().Header,children:[(0,a.jsx)(r(),{href:u.f.HOME_PAGE,children:(0,a.jsx)(l,{})}),c,(0,a.jsxs)("div",{className:d().HeaderRightSection,children:[(0,a.jsx)(h.A,{className:d().RoundButton,color:"gray",children:(0,a.jsx)(o.A,{src:"/assets/images/icons/search.svg",alt:"Info",height:18,width:18})}),(0,a.jsx)(h.A,{className:d().RoundButton,color:"gray",children:(0,a.jsx)(o.A,{src:"/assets/images/icons/bell.svg",alt:"Info",height:18,width:18})})]})]}),(0,a.jsx)("main",{className:(0,i.t)(d().Main,s),children:t}),(0,a.jsx)(g,{className:d().AppTabBar})]})})}},50418:e=>{e.exports={Layout:"AuthenticationPage_Layout__7Pyd_",Main:"AuthenticationPage_Main__gll00",FormContainer:"AuthenticationPage_FormContainer__NwHe6"}},61781:e=>{e.exports={Container:"OtpField_Container__eAguj",Input:"OtpField_Input__xzhuh"}},65635:(e,t,n)=>{"use strict";n.d(t,{or:()=>_,z3:()=>A,dC:()=>y});var a=n(94971),s=n(95920),r=n(86266),i=n(51990);let o=(0,i.Z0)({name:"TAG",initialState:{tags:[]},reducers:{addTags:(e,t)=>{let{tags:n,replaceData:a,replaceList:s}=t.payload;e.tags=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{replaceData:a,replaceList:s,itemIdKey:r="id",oldNewItemCombineFunction:i}=n;return s?t:(t.forEach(t=>{let n=t[r],s=e.findIndex(e=>e.id===n);if(-1===s)e.unshift(t);else if(a)e[s]=t,e=[...e];else{let n=e[s],a=i?i(n,t):{...n,...t};e[s]=a}}),e)}(e.tags,n,{replaceData:a,replaceList:s})},removeTags:(e,t)=>{var n;let{idList:a}=t.payload;n=e.tags,e.tags=n.filter(e=>!a.includes(e.id))}}}),l=o.actions,u=o.reducer,c=(0,i.U1)({reducer:{tag:u},middleware:e=>e()});var d=new WeakMap,h=new WeakMap;class _{constructor(e){(0,s._)(this,d,{writable:!0,value:void 0}),(0,s._)(this,h,{writable:!0,value:void 0}),(0,r._)(this,h,"918269528466"),this.fetchTagByIds=e=>{let{tagIds:t}=e;return(0,a._)(this,d).post("/tags/by_id",{tag_ids:t,user_id:(0,a._)(this,h)}).then(e=>{let t=e.data;return c.dispatch(l.addTags({tags:t})),{tags:t}})},this.fetchTags=e=>{let{type:t,parentId:n}=e;return(0,a._)(this,d).post("/tags",{type:t,user_id:(0,a._)(this,h),parent_id:n}).then(e=>{let t=e.data.data;return c.dispatch(l.addTags({tags:t})),{tags:t}})},(0,r._)(this,d,e.apiService)}}var m=n(26072),p=n(12115),v=n(67206),g=n.n(v),f=n(15559);let A=function(e){let{tagIds:t}=e,n=(0,p.useMemo)(()=>(t.sort(),t.map(e=>"tag/".concat(e))),[t]),{data:a,error:s,isLoading:r,mutate:i}=(0,m.Ay)(n,()=>f.Nz.fetchTagByIds({tagIds:t}).then(e=>{let{tags:t}=e;return g()(t,"id")}),{dedupingInterval:3e4});return{tags:a||[],error:s,isLoading:r,isUpdating:void 0!==a&&r,refresh:()=>i(),noData:!r&&!a}},y=function(e){let{type:t,parentId:n}=e,{data:a,error:s,isLoading:r,mutate:i}=(0,m.Ay)("tag/".concat(t,"_").concat(n),()=>f.Nz.fetchTags({type:t,parentId:n}),{dedupingInterval:3e4}),o=void 0!==a&&r,l=!r&&!a;return{tags:(null==a?void 0:a.tags)||[],error:s,isLoading:r,isUpdating:o,refresh:()=>i(),noData:l}}},67666:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var a=n(95155),s=n(66766);let r=function(e){let{src:t,alt:n,width:r,height:i,className:o}=e;return(0,a.jsx)(s.default,{src:t,alt:n,width:r,height:i,className:o})}},67959:(e,t,n)=>{"use strict";n.d(t,{jQ:()=>g,Ay:()=>_,mN:()=>d});var a=n(95155),s=n(12115),r=n(49694),i=n(40139),o=n.n(i),l=n(48973),u=n.n(l);let c=s.createContext({});function d(){return s.useContext(c)}function h(e){let{initialValues:t={},yupValidationSchema:n,children:i,onSubmit:l,extraFields:d,onChange:h}=e,_=(0,s.useCallback)(e=>{l&&l(e)},[l]),m=(0,r.Wx)({initialValues:t,onSubmit:_,validationSchema:n,validateOnMount:!0}),{values:p,errors:v,touched:g,setFieldValue:f,handleSubmit:A,setFieldTouched:y}=m,b=(0,s.useCallback)(e=>!!u()(v,e,!1)&&!!u()(g,e,!1),[v,g]),x=!!Object.keys(v).length,k=(0,s.useMemo)(()=>({values:p,errors:v,touched:g,setFieldValue:f,submitForm:A,setFieldTouched:y,touchedAndHasError:b,hasError:x,...d}),[p,v,g,f,A,y,b,d,x]);return(0,s.useEffect)(()=>{h&&h(p,{hasError:x})},[h,p,x]),(0,a.jsx)(c.Provider,{value:k,children:(0,a.jsx)(r.QI,{value:m,children:o()(i)?i({context:k}):i})})}let _=function(e){return(0,a.jsx)(h,{...e})};var m=n(82855),p=n(21178),v=n.n(p);let g=e=>{let{fieldKey:t,className:n,children:s}=e,{touchedAndHasError:r,errors:i}=d(),o=u()(i,t);return o&&r(t)?(0,a.jsx)("div",{className:(0,m.t)(v().Error,n),children:s||o}):null}},68596:(e,t,n)=>{"use strict";n.d(t,{cs:()=>l,oC:()=>m,s_:()=>h,FX:()=>d});var a=n(94971),s=n(95920),r=n(86266),i=new WeakMap,o=new WeakMap;class l{constructor(e){(0,s._)(this,i,{writable:!0,value:void 0}),(0,s._)(this,o,{writable:!0,value:void 0}),(0,r._)(this,o,"918269528466"),this.fetchTendersList=e=>{let{limit:t=10,offset:n=0}=e;return(0,a._)(this,i).post("/tenders/view_all_tenders",{user_id:(0,a._)(this,o),limit:t,offset:n}).then(e=>({tenders:e.data}))},this.fetchTenderById=e=>{let{tenderId:t}=e;return(0,a._)(this,i).post("/tenders/single_page_view",{user_id:(0,a._)(this,o),tender_id:t}).then(e=>({tendersDetails:e.data}))},(0,r._)(this,i,e.apiService)}}var u=n(26072),c=n(15559);let d=function(){let{limit:e=10,offset:t=0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{data:n,error:a,isLoading:s,mutate:r}=(0,u.Ay)("tag/".concat(e,"_").concat(t),()=>c.av.fetchTendersList({limit:e,offset:t}).then(e=>e.tenders),{dedupingInterval:3e4});return{tenders:n||[],error:a,isLoading:s,isUpdating:void 0!==n&&s,refresh:()=>r(),noData:!s&&!n}},h=function(e){let{tenderId:t}=e,{data:n,error:a,isLoading:s,mutate:r}=(0,u.Ay)(t?"/tenders/single_page_view/".concat(t):"",()=>c.av.fetchTenderById({tenderId:t}).then(e=>e.tendersDetails),{dedupingInterval:3e4});return{tenderDetails:n||null,error:a,isLoading:s,isUpdating:void 0!==n&&s,refresh:()=>r(),noData:!s&&!n}};var _=n(93162);function m(e){let{tenderId:t}=e;return"".concat(_.f.TENDERS_PAGE,"/details?tender_id=").concat(t)}},71962:(e,t,n)=>{"use strict";n.d(t,{Ht:()=>m,TM:()=>v,As:()=>p.useAuth,RB:()=>g.default});var a=n(94971),s=n(95920),r=n(86266),i=n(45009),o=n.n(i),l=n(48973),u=n.n(l),c=n(78966),d=n.n(c),h=new WeakMap,_=new WeakMap;class m{constructor(e){(0,s._)(this,h,{writable:!0,value:void 0}),(0,s._)(this,_,{writable:!0,value:void 0}),(0,r._)(this,_,"918269528466"),this.checkUserExists=e=>{let{phoneNumberWithCountryCode:t}=e;return(0,a._)(this,h).anonPost("/auth/user_exist_check?user_id=".concat(t))},this.generateOtp=e=>{let{phoneNumberWithCountryCode:t}=e;return(0,a._)(this,h).anonPost("/auth/generate_otp?user_id=".concat(t),{user_id:t}).then(e=>e.data)},this.verifyOtp=async e=>{let{otp:t,phoneNumberWithCountryCode:n}=e;await (0,a._)(this,h).post("/auth/verify_otp",{otp:t});let{token:s}=await (0,a._)(this,h).post("/auth/generate_otp?user_id=".concat(n)).then(e=>e.data);return{token:s}},this.fetchUserDetails=()=>(0,a._)(this,h).post("/users/fetch_preferences",{user_id:(0,a._)(this,_)}).then(e=>({userPreferences:e.data.data,success:!0})),this.saveUserDetails=e=>{let{userPreferences:t}=e,n={...t,user_id:(0,a._)(this,_)};return(0,a._)(this,h).put("/users/update_preferences",n).then(()=>({success:!0}))},this.saveUserDetailsPartial=e=>{let{userPreferences:t}=e,n={...t,user_id:(0,a._)(this,_)};return n=function(e){let{userPreferences:t}=e,n=d()(t);return["location.state","location.districts","location.town","location.locality","location.locality_village"].forEach(e=>{u()(n,e)||o()(n,e,[])}),{userPreferencesSanitized:n}}({userPreferences:n}).userPreferencesSanitized,(0,a._)(this,h).patch("/users/update_preferences_partial",n).then(()=>({success:!0}))},this.mockFetchUserDetails=()=>{let e=null;if("undefined"!=typeof localStorage)try{e=JSON.parse(localStorage.getItem("TENDERWISE:USER_DETAILS")||"{}")}catch(t){e=null}return this.fetchUserDetails(),(0,a._)(this,h).mockCall().then(()=>({userDetails:e}))},this.mockSaveUserDetails=e=>{let{userPreferences:t}=e;return"undefined"!=typeof localStorage&&localStorage.setItem("TENDERWISE:USER_DETAILS",JSON.stringify(t)),this.saveUserDetailsPartial({userPreferences:t}),(0,a._)(this,h).mockCall().then(()=>({success:!0}))},(0,r._)(this,h,e.apiService)}}n(90183);var p=n(29629),v=function(e){return e.English="en",e.Hindi="hi",e.Marathi="mr",e.None="",e}({}),g=n(32768)},79510:e=>{e.exports={Container:"AppTabBar_Container__2UFXP",NavItem:"AppTabBar_NavItem__abfL3",NavItemActive:"AppTabBar_NavItemActive__x0oKN",Label:"AppTabBar_Label__4bL65"}},82855:(e,t,n)=>{"use strict";function a(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(t=(t=Array.from(new Set(t))).filter(Boolean)).join(" ")}n.d(t,{t:()=>a})},83660:e=>{e.exports={Button:"AuthenticationForm_Button__v_7mk",Heading:"AuthenticationForm_Heading__D1NbZ",SubHeading:"AuthenticationForm_SubHeading__4X5o_",Label:"AuthenticationForm_Label__sbeYb",Small:"AuthenticationForm_Small__l3N8b",PhoneDisplay:"AuthenticationForm_PhoneDisplay__1BEpb"}},90147:e=>{e.exports={Button:"Button_Button__R3Zme",ButtonPrimary:"Button_ButtonPrimary__Fz5fM",ButtonSecondary:"Button_ButtonSecondary__3yTUY",ButtonGhost:"Button_ButtonGhost__60Vkw",ButtonDisabled:"Button_ButtonDisabled__JX7Ng",ButtonSmall:"Button_ButtonSmall__cPUf_",ButtonMedium:"Button_ButtonMedium__P78u0",ButtonLarge:"Button_ButtonLarge__S7Z_W",ButtonBlack:"Button_ButtonBlack__Qgqmf",ButtonGray:"Button_ButtonGray__CCvYs",ButtonColorPrimary:"Button_ButtonColorPrimary__VHKqe"}},90183:(e,t,n)=>{"use strict";n.d(t,{default:()=>D});var a=n(95155),s=n(12115),r=n(15559),i=n(35695),o=n(15616),l=n(71962),u=function(e){return e.Phone="phone",e.Otp="otp",e}({}),c=n(37129),d=n(82855),h=n(39365),_=n.n(h),m=n(4407),p=n.n(m);n(30133);let v=function(e){let{className:t,value:n,onChange:r}=e,i=(0,s.useCallback)(function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];r&&r(t[3])},[r]);return(0,a.jsx)(_(),{disableDropdown:!0,country:"in",containerClass:(0,d.t)(p().Container,t),inputClass:p().Input,buttonClass:p().Button,value:n,onChange:i,placeholder:"Enter Your Mobile Number"})};var g=n(14186),f=n(83660),A=n.n(f),y=n(23293),b=n(61781),x=n.n(b);let k=function(e){let{className:t,value:n,onChange:r}=e,[i,o]=(0,s.useState)(""),l=void 0!==n&&void 0!==r;return(0,a.jsx)(y.A,{containerStyle:(0,d.t)(t,x().Container),value:l?n:i,onChange:l?r:o,numInputs:6,renderInput:e=>(0,a.jsx)("input",{...e,type:"number",pattern:"[0-9]*",inputMode:"numeric",className:x().Input}),placeholder:"------"})};var B=n(67666);let N=o.sf,S={phone:"",otp:""},w=c.Ik().shape({phone:c.Yj().required(),otp:c.Yj().min(6).max(6).required()}),j=[{id:u.Phone,order:1,content:(0,a.jsx)(function(){let{setFieldValue:e,values:{phone:t},stepFormRef:n}=N(),{generateOtp:r,isGettingOtp:i}=(0,l.As)(),o=(0,s.useCallback)(t=>{e("phone",t),e("otp","")},[e]),c=(0,s.useCallback)(()=>{r({phoneNumberWithCountryCode:t.replaceAll("+","").replaceAll(" ","").replaceAll("-","")}).then(()=>{n.current&&n.current.gotToStep(u.Otp)}),e("otp","")},[r,e,t,n]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:A().Heading,children:"Enter Whatsapp Number"}),(0,a.jsx)("div",{className:(0,d.t)("mt-2",A().SubHeading),children:"We'll have to make sure it's you."}),(0,a.jsx)("label",{className:(0,d.t)("mt-4",A().Label),children:"Mobile Number"}),(0,a.jsx)(v,{className:"w-100 mt-2",value:t,onChange:o}),(0,a.jsx)("div",{className:(0,d.t)("mt-2",A().Small),children:"We will send a verification otp on your number to verify your number."}),(0,a.jsx)(g.A,{disabled:i,onClick:c,className:(0,d.t)("w-100","mt-4 mt-md-5",A().Button),children:i?"Please wait...":"Send OTP"})]})},{})},{id:u.Otp,order:1,content:(0,a.jsx)(function(){let{isSubmittingOtp:e,values:{phone:t,otp:n},setFieldValue:r,stepFormRef:i,errors:o}=N(),l=!!o.otp||e,c=(0,s.useCallback)(()=>{i.current&&i.current.gotToStep(u.Phone)},[i]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:A().Heading,children:"Verify Your Number"}),(0,a.jsx)("div",{className:(0,d.t)("mt-2",A().SubHeading),children:"Enter the OTP sent to"}),(0,a.jsxs)("div",{className:(0,d.t)("mt-1",A().PhoneDisplay),children:[t,(0,a.jsx)(g.A,{variant:"ghost",size:"sm",onClick:c,children:(0,a.jsx)(B.A,{src:"/assets/images/icons/edit.svg",alt:"Info",height:16,width:16})})]}),(0,a.jsx)("label",{className:(0,d.t)("mt-4",A().Label),children:"OTP"}),(0,a.jsx)(k,{className:"mt-2",value:n,onChange:e=>{r("otp",e)}}),(0,a.jsx)(g.A,{disabled:l,className:(0,d.t)("w-100","mt-4 mt-md-5",A().Button),type:"submit",children:e?"Please wait...":"Proceed"})]})},{})}],C=function(e){let{className:t}=e,[n,r]=(0,s.useState)(!1),c=(0,i.useRouter)(),{verifyOtp:d}=(0,l.As)(),h=(0,s.useRef)(null),_=(0,s.useCallback)(async e=>{if(n)return;r(!0);let{otp:t,phone:a}=e,s=a.replaceAll("+","").replaceAll(" ","").replaceAll("-",""),{isNewUser:i}=await d({otp:t,phoneNumberWithCountryCode:s}).finally(()=>{r(!1)});i&&c.push("/welcome")},[n,d,c]),m=(0,s.useMemo)(()=>({isSubmittingOtp:n}),[n]);return(0,a.jsx)(o.Ay,{ref:h,className:t,extraFields:m,initialValues:S,yupValidationSchema:w,onSubmit:_,initialStepId:u.Phone,steps:j})};var P=n(42019),T=n(50418),E=n.n(T);let I=function(){return(0,a.jsx)(P.A,{className:E().Layout,mainClassName:E().Main,appendHeader:(0,a.jsx)(g.A,{variant:"ghost",size:"sm",children:(0,a.jsx)(B.A,{src:"/assets/images/icons/info.svg",alt:"Info",height:20,width:20})}),children:(0,a.jsx)("div",{className:(0,d.t)(E().FormContainer),children:(0,a.jsx)(C,{})})})};var M=n(29629);let D=function(e){let{children:t}=e,[n,i]=(0,s.useState)(!1),[o,l]=(0,s.useState)(!0),[u,c]=(0,s.useState)(!1),[d,h]=(0,s.useState)(!0),_=(0,s.useCallback)(e=>{let{phoneNumberWithCountryCode:t}=e;return u?Promise.resolve():(c(!0),h(!1),r.a.generateOtp({phoneNumberWithCountryCode:t}).then(e=>{let{token:t}=e;r.Kp.setAuthToken(t)}).finally(()=>{c(!1)}))},[u]),m=(0,s.useCallback)(async e=>{let{otp:t,phoneNumberWithCountryCode:n}=e;if(o)return Promise.resolve({isNewUser:!1});l(!0),h(!1);let a=!await r.a.checkUserExists({phoneNumberWithCountryCode:n});return h(a),await r.a.verifyOtp({otp:t,phoneNumberWithCountryCode:n}).then(e=>{let{token:t}=e;i(!0),r.Kp.setAuthToken(t)}).finally(()=>{l(!1)}),{isNewUser:a}},[o]),p=(0,s.useCallback)(async()=>(r.Kp.clearAuthToken(),l(!1),i(!1),{success:!0}),[]);(0,s.useEffect)(()=>{i(!!r.Kp.getAuthToken()),l(!1)},[]);let v=(0,s.useMemo)(()=>({isAuthenticated:n,isAuthenticating:o,isGettingOtp:u,generateOtp:_,verifyOtp:m,isNewUser:d,logout:p}),[n,o,u,_,m,d,p]);return(0,a.jsx)(M.g.Provider,{value:v,children:o?null:n?t:(0,a.jsx)(I,{})})}},93162:(e,t,n)=>{"use strict";n.d(t,{f:()=>a});let a={HOME_PAGE:"/",ONBOARDING_FORM_PAGE:"/onboard",TENDERS_PAGE:"/tenders",SETTINGS_PAGE:"/settings"}}}]);